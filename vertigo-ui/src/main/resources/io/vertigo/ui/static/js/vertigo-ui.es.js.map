{"version":3,"file":"vertigo-ui.es.js","sources":["../src/components/VChatbot.vue","../src/components/VCommands.vue","../src/components/VComments.vue","../src/components/VExtensionsStore.vue","../src/components/VFacets.vue","../src/components/VGeopointInput.vue","../src/components/VHandles.vue","../src/components/VJsonEditor.vue","../src/components/VNotifications.vue","../src/components/VMap.vue","../src/components/VMapLayer.vue","../src/components/VTree.vue","../src/components/VFileUpload.vue","../node_modules/d3-color/src/define.js","../node_modules/d3-color/src/color.js","../node_modules/d3-interpolate/src/constant.js","../node_modules/d3-interpolate/src/color.js","../node_modules/d3-interpolate/src/rgb.js","../node_modules/d3-interpolate/src/hsl.js","../src/components/dashboard/dashboard-tools.js","../src/components/dashboard/VDashboardChart.vue","../src/directives/VAlertUnsavedUpdates.js","../src/directives/VAutofocus.js","../src/directives/VIfUnsavedUpdates.js","../src/directives/VMinify.js","../src/directives/VScrollSpy.js","../node_modules/quasar/src/utils/private/sort.js","../node_modules/quasar/src/utils/is.js","../src/methods.js","../src/lang/vertigo-ui-lang-en-us.js","../src/lang/vertigo-ui-lang-fr.js","../src/main.js"],"sourcesContent":["<template>\r\n    <div class=\"bot\">\r\n        <q-scroll-area class=\"bg-grey-2 col-grow row q-pa-sm\" ref=\"scroller\">\r\n            <div class=\"q-pr-md\">\r\n                <div v-for=\"(msg, index) in messages\" :key=\"index\">\r\n                    <q-chat-message v-if=\"msg.rating\" class= \"animate-fade\" :key=\"'msgRating-'+index\" :sent=\"msg.sent\" :bg-color= \"msg.bgColor\" :avatar = \"msg.avatar\" >\r\n                        <q-rating v-model=\"msg.rating\" :max=\"5\" style=\"font-size: 2rem;\" readonly ></q-rating>\r\n                    </q-chat-message>\r\n                    <q-chat-message v-if=\"msg.text\" class=\"animate-fade\" :key=\"'msg-'+index\" :label=\"msg.label\" :sent=\"msg.sent\" :text-color=\"msg.textColor\"\r\n                        :bg-color=\"msg.bgColor\" :name=\"msg.name\" :avatar=\"msg.avatar\" :text=\"msg.text\" :stamp=\"msg.stamp\" ></q-chat-message>\r\n                </div>\r\n                <div class=\"sys-chat\">\r\n                    <q-chat-message v-if=\"error\" class=\"animate-fade\" bg-color=\"orange-4\" text-color=\"black\" size=\"12\" >\r\n                        <div class=\"q-pb-sm\">\r\n                            {{$q.lang.vui.chatbot.errorMessage}}\r\n                        </div>\r\n                        <q-btn class=\"full-width\" @click=\"askBot(lastPayload)\" :label=\"$q.lang.vui.chatbot.tryAgain\" color=\"white\" text-color=\"black\" ></q-btn>\r\n                    </q-chat-message>\r\n                </div>\r\n                <div class=\"sys-chat non-selectable\">\r\n                    <q-chat-message v-if=\"inputConfig.buttons.length > 0\" class=\"animate-fade\" bg-color=\"primary\" size=\"12\">\r\n                        <div class=\"text-blue-2 q-caption\">\r\n                            {{$q.lang.vui.suggestedAnswers}}\r\n                        </div>\r\n                        <div class=\"row docs-btn\">\r\n                            <q-btn v-for=\"(btn, index) in inputConfig.buttons\" class=\"full-width\" :key=\"'repChatBtn-'+index\" @click=\"postAnswerBtn(btn)\" :label=\"btn.title\" color=\"white\" text-color=\"black\" ></q-btn>\r\n                        </div>\r\n                    </q-chat-message>\r\n                </div>\r\n                <div class=\"message-processing sys-chat non-selectable\" >\r\n                    <q-chat-message v-if=\"processing\" class=\"animate-fade\" bg-color=\"grey-4\">\r\n                        <q-spinner-dots size=\"2em\"></q-spinner-dots>\r\n                    </q-chat-message>\r\n                </div>\r\n                <div class=\"non-selectable\">\r\n                    <q-chat-message v-if=\"inputConfig.showRating\" class=\"animate-fade\" bg-color=\"primary\" sent >\r\n                        <q-rating v-model=\"rating\" :max=\"4\" style=\"font-size: 2rem;\" ></q-rating>\r\n                    </q-chat-message>\r\n                </div>\r\n            </div>\r\n        </q-scroll-area>\r\n        <div class=\"message-response row docs-btn q-pl-sm non-selectable\">\r\n            <q-input :type=\"inputConfig.modeTextarea ? 'textarea' : 'text'\"\r\n                     ref=\"input\"\r\n                     @keyup.enter=\"inputConfig.modeTextarea ? false : (inputConfig.responseText.trim() === '' && inputConfig.rating === 0) ? false : postAnswerText()\"\r\n                     :max-height=\"100\"\r\n                     class=\"col-grow\"\r\n                     v-model=\"inputConfig.responseText\"\r\n                     :placeholder=\"$q.lang.vui.chatbot.inputPlaceholder\"\r\n                     :disable=\"processing || error\"\r\n                     :loading=\"processing\"></q-input>\r\n        \r\n            <q-btn round color=\"primary\" icon=\"send\" @click=\"postAnswerText()\" :disable=\"processing || (inputConfig.responseText.trim() === '' && inputConfig.rating === 0)\"></q-btn>\r\n            <q-btn round color=\"red\" icon=\"refresh\" @click=\"restart\" v-if=\"devMode === true\"></q-btn>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    props : {\r\n            botUrl : { type: String, required:true },\r\n            devMode: { type: Boolean, 'default': false },\r\n            minTimeBetweenMessages: { type: Number, 'default': 1000 },\r\n            botAvatar: { type: String, required:true },\r\n            botName: { type: String, required:true }\r\n    },\r\n    data: function () {\r\n        return {\r\n            // config\r\n            convId: 42,\r\n            // technique\r\n            inputConfig: {\r\n                modeTextarea : false, // TODO, il exste d'autres modes, par ex email\r\n                responseText: \"\",\r\n                responsePattern : \"\",\r\n                showRating : false,\r\n                rating: 0,\r\n                buttons: [],\r\n            },\r\n            prevInputConfig: {},\r\n            lastPayload: null,\r\n            processing: false,\r\n            error: false,\r\n            messages: [],\r\n            keepAction: false,\r\n            menu: false,\r\n            lastUserInteraction: 0,\r\n            watingMessagesStack: []\r\n        }\r\n    },\r\n    created : function () {\r\n        this.askBot('/start'); // lancement de la phrase d'accueil\r\n        this.convId = Math.random();\r\n        \r\n    },\r\n    methods: {\r\n        postAnswerBtn: function (btn) {\r\n            this.messages.push({\r\n                text: [btn.title],\r\n                sent: true,\r\n                bgColor: \"primary\",\r\n                textColor: \"white\"\r\n            });\r\n\r\n            this._scrollToBottom();\r\n            \r\n            this.askBot(btn.payload);\r\n        },\r\n        postAnswerText: function () {\r\n            var sanitizedString = this.inputConfig.responseText.trim().replace(/(?:\\r\\n|\\r|\\n)/g, '<br>');\r\n            \r\n            this.messages.push({\r\n                text: sanitizedString !== '' ? [sanitizedString] : null,\r\n                rating: this.inputConfig.rating > 0 ? this.inputConfig.rating : null,\r\n                sent: true,\r\n                bgColor: \"primary\",\r\n                textColor: \"white\"\r\n            });\r\n\r\n            this._scrollToBottom();\r\n            \r\n            var response = this.inputConfig.responsePattern === \"\" ? sanitizedString.replace(/(\")/g, \"\\\"\")\r\n                                                            : this.inputConfig.responsePattern.replace(\"#\", sanitizedString.replace(/(\")/g, \"\\\\\\\"\"));\r\n            \r\n            this.askBot(response);\r\n        },\r\n        _scrollToBottom: function () {\r\n            if (this.$refs.scroller) {\r\n                this.$refs.scroller.setScrollPosition(this.$refs.scroller.scrollHeight, 400);\r\n            }\r\n        },\r\n        askBot: function (value) {\r\n            this.prevInputConfig = JSON.parse(JSON.stringify(this.inputConfig));\r\n            this.reinitInput();\r\n            this.lastPayload = value;\r\n            this.processing = true;\r\n            \r\n            this.lastUserInteraction = Date.now();\r\n            \r\n            this.$http.post(this.botUrl, {sender: this.convId, message: value})\r\n                .then(function(httpResponse) {\r\n                    // success\r\n                    httpResponse.data.forEach(function(value) {\r\n                        this.watingMessagesStack.push(value);\r\n                    }, this);\r\n                    \r\n                    this._displayMessages();\r\n                }.bind(this))\r\n                .catch(\r\n                function() {\r\n                    // error\r\n                    this.error = true;\r\n                    \r\n                    this.processing = false;\r\n                    this._scrollToBottom();\r\n                }.bind(this));\r\n                \r\n        },\r\n        _displayMessages: function () {\r\n            if (this.watingMessagesStack.length > 0) {\r\n                var currentMessage = this.watingMessagesStack.shift();\r\n                var watingTime = this.lastUserInteraction - Date.now() + this.minTimeBetweenMessages;\r\n                \r\n                this.sleep(watingTime).then(function() {\r\n                    this._processResponse(currentMessage);\r\n                    this.lastUserInteraction = Date.now();\r\n                    this._displayMessages();\r\n                }.bind(this));\r\n            } else {\r\n                this.processing = false;\r\n                if (this.keepAction) {\r\n                    this.inputConfig = this.prevInputConfig;\r\n                    this.inputConfig.responseText = \"\";\r\n                    this.keepAction = false;\r\n                }\r\n                \r\n                this.sleep(1).then(function() { // en différé le temps que la vue soit mise à jour\r\n                    this.$refs.input.focus();\r\n                }.bind(this));\r\n            }\r\n        },\r\n        _processResponse: function (response) {\r\n        var lastMsg = this.messages[this.messages.length-1];\r\n            if (lastMsg && !lastMsg.sent) {\r\n                // ajoute un message à un précédent message du bot\r\n                lastMsg.text.push(response.text);\r\n            } else {\r\n                // première réponse du bot\r\n                this.messages.push({\r\n                    avatar: this.botAvatar,\r\n                    text: [response.text],\r\n                    bgColor: \"grey-4\"\r\n                });\r\n            }\r\n            \r\n            if (response.buttons) {\r\n                response.buttons.forEach(function(value) {\r\n                    if (value.title.startsWith(\"#\")) {\r\n                        var cmd = value.title.substring(1);\r\n                        if (cmd === \"textarea\") this.inputConfig.modeTextarea = true;\r\n                        if (cmd === \"eval\") this.inputConfig.showRating = true;\r\n                        if (cmd === \"keep_action\") this.keepAction = true;\r\n                        if (value.payload) this.inputConfig.responsePattern = value.payload;\r\n                    } else {\r\n                        this.inputConfig.buttons.push(value);\r\n                    }\r\n                }, this);\r\n            }\r\n            \r\n            this._scrollToBottom();\r\n        },\r\n        restart: function () {\r\n            this.messages.push({\r\n                text: [this.$q.lang.vui.chatbot.restartMessage],\r\n                bgColor: \"orange\"\r\n            });\r\n            this._scrollToBottom();\r\n            \r\n            this.$http.post(this.botUrl, '{\"sender\":\"' + this.convId + '\",\"message\":\"/restart\"}')\r\n            .then(function() {\r\n                this.askBot(\"/start\"); // lancement de la phrase d'accueil\r\n            }.bind(this));\r\n        },\r\n        reinitInput: function () {\r\n            this.inputConfig.modeTextarea = false;\r\n            this.inputConfig.responsePattern = \"\";\r\n            this.inputConfig.responseText = \"\";\r\n            this.inputConfig.showRating = false;\r\n            this.inputConfig.rating = 0;\r\n            this.inputConfig.buttons = [];\r\n            this.error = false;\r\n        },\r\n        sleep : function(milliseconds) {\r\n            return new Promise(function(resolve) {setTimeout(resolve, milliseconds)});\r\n        }\r\n    }\r\n}\r\n</script>","<template>\r\n    <div>\r\n        <q-select v-if=\"!isCommandCommited\" :placeholder=\"$q.lang.vui.commands.globalPlaceholder\" outlined bg-color=\"white\" dense ref=\"commandInput\" autofocus dropdown-icon=\"search\" @blur=\"reset\"\r\n                use-input input-debounce=\"300\" hide-selected  v-on:keydown=\"commitCommand\"\r\n                :options=\"commandAutocompleteOptions\" @filter=\"searchCommands\" @update:model-value=\"selectCommand\">\r\n            <span v-if=\"text !== '' && selectedCommand.commandName && selectedCommand.commandName.startsWith(text)\" style=\"z-index= -1; line-height: 40px; opacity:0.5; position:fixed;\">{{selectedCommand.commandName}}</span>\r\n        </q-select>\r\n        <div v-else class=\"row col-12 justify-between bg-white round-borders overflow-hidden shadow-2 text-black\" v-on:keyup.enter=\"executeCommand\">\r\n            <div class=\"bg-grey-4 text-center vertical-middle text-bold q-px-md\" style=\"line-height: 40px;\">{{selectedCommand.commandName}}</div>\r\n            <div v-if=\"!isExecuted\" class=\"row col items-center q-py-xs\">\r\n                <template v-if=\"selectedCommand.commandParams && selectedCommand.commandParams.length > 0\" >\r\n                    <template v-for=\"(param, index) in selectedCommand.commandParams\" :key=\"param\" >\r\n                        <template v-if=\"param.paramType.rawType === 'io.vertigo.commons.command.GenericUID'\">\r\n                            <q-select class=\"col q-px-xs\" use-chips bg-color=\"white\" dense borderless use-input input-debounce=\"300\" :value=\"getParamValue(index)\" :options=\"paramsAutocompleteOptions[index]\" :autofocus=\"index === 0\" dropdown-icon=\"search\" \r\n                                  v-on:keydown.delete=\"function(event) {backIfNeeded(event, index === 0)}\" v-on:keyup.esc=\"function(event) {backIfNeeded(event, index === 0)}\"   \r\n                                  @filter=\"autocompleteParam(param, index, val, update, abort)\" @update:model-value=\"selectParam(newValue, index)\" style=\"height:32px;\">\r\n                            </q-select>\r\n                        </template>\r\n                        <template v-else>\r\n                            <q-input class=\"col q-px-xs\" color=\"secondary\" borderless v-model=\"commandParamsValues[index].value\" @keydown.delete=\"backIfNeeded(event, index === 0)\" @keyup.esc=\"backIfNeeded(event, index === 0)\" :autofocus=\"index === 0\" @keyup.enter=\"handleEnter(index)\" dense style=\"height:32px;\">\r\n                            </q-input>\r\n                        </template>\r\n                        <q-separator vertical></q-separator>\r\n                    </template>\r\n                </template>\r\n                <div class=\"col\" v-else>{{$q.lang.vui.commands.executeCommand}}</div>\r\n                <q-btn @click=\"executeCommand\" flat icon=\"play_arrow\" size=\"sm\" round></q-btn>\r\n            </div>\r\n            <div v-else class=\"row col items-center\" >\r\n                <div class=\"col shadow-2 bg-secondary text-white q-px-md\" style=\"line-height: 40px;\">{{commandResult.display}}</div>\r\n                <q-btn v-if=\"commandResult.targetUrl\" type=\"a\" :href=\"baseUrl + commandResult.targetUrl\" flat  >{{$q.lang.vui.commands.linkLabel}}</q-btn>\r\n                <q-btn @click=\"reset\" flat icon=\"cancel\" size=\"sm\" round></q-btn>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    data: function() {\r\n        return {\r\n            text: \"\",\r\n            commandParamsValues: [],\r\n            commands : [],\r\n            commandAutocompleteOptions : [],\r\n            isCommandCommited: false,\r\n            selectedCommand: {},\r\n            isExecuted: false,\r\n            commandResult : {},\r\n            paramsAutocompleteOptions: []\r\n        }\r\n    },\r\n    props : {\r\n        baseUrl : { type: String, 'default': '/' },\r\n    },\r\n    methods : {\r\n        searchCommands : function(val, update, abort) {\r\n            this.$data.text = val;\r\n            this.$data.selectedCommand = {};\r\n            if (val.length < 1) {\r\n                abort();\r\n                return;\r\n            }\r\n            this.$http.post(this.baseUrl+'api/vertigo/commands/_search', {prefix: val} )\r\n                .then( function (response) { //Ok\r\n                    this.$data.commands = response.data;\r\n                    update(function() {\r\n                        this.$data.commandAutocompleteOptions = this.$data.commands.map(function(command) {\r\n                             return {\r\n                                 label: command.commandName,\r\n                                 sublabel: command.descpription,\r\n                                 value: command.commandName,\r\n                                 command : command\r\n                             }\r\n                        });\r\n                    }.bind(this));\r\n                    if (this.$data.commands.length > 0) {\r\n                        this.chooseCommand(this.$data.commands[0], false);\r\n                    }\r\n                }.bind(this));\r\n            \r\n        },\r\n        selectCommand : function (selection) {\r\n            this.chooseCommand(selection.command, true);\r\n        },\r\n        chooseCommand: function (command, commitCommand) {\r\n            this.$data.selectedCommand = command;\r\n            if (this.$data.selectedCommand.commandParams) {\r\n                // if we have params\r\n                this.$data.commandParamsValues = this.$data.selectedCommand.commandParams.map(function()  {\r\n                    // we prepare params\r\n                    return {\r\n                        value:\"\"\r\n                    };  \r\n                });\r\n            } else {\r\n                this.$data.commandParamsValues = [];\r\n            }\r\n            this.$data.isCommandCommited = commitCommand;\r\n        },\r\n        commitCommand : function(keyEvent) {\r\n            if (this.$data.selectedCommand && this.$data.selectedCommand.commandName) {\r\n                switch(keyEvent.keyCode) {\r\n                    case 9:\r\n                    case 13:\r\n                        this.$data.isCommandCommited = true;\r\n                        keyEvent.preventDefault();\r\n                }\r\n            }\r\n        },\r\n        executeCommand : function() {\r\n            if (this.$data.commandParamsValues.every(function(paramValue){ return paramValue;})) {\r\n                var actualParams = this.$data.commandParamsValues.map(function (param) {\r\n                    return param.value;\r\n                });\r\n                \r\n                this.$http.post(this.baseUrl+'api/vertigo/commands/_execute', {command: this.$data.selectedCommand.commandName, params: actualParams} )\r\n                    .then( function (response) { //Ok\r\n                        this.$data.isExecuted = true;\r\n                        this.$data.commandResult = response.data;\r\n                    }.bind(this));\r\n            } else {\r\n                return false;\r\n            }\r\n            \r\n        },\r\n        handleEnter: function (index) {\r\n            if (index === this.$data.selectedCommand.commandParams.length - 1 && this.$data.commandParamsValues[index].value) {\r\n                this.executeCommand();\r\n            }\r\n            // otherwise nothing particular\r\n        },\r\n        autocompleteParam : function(param, index, val, update, abort) {\r\n            if (val.length < 1) {\r\n                abort();\r\n                return;\r\n            }\r\n            this.$http.get(this.baseUrl+'api/vertigo/commands/params/_autocomplete', {params : {terms: val, entityClass: param.paramType.actualTypeArguments[0]}})\r\n                .then( function (response) {\r\n                    update(function() {\r\n                        var newOptions = this.$data.paramsAutocompleteOptions.slice();\r\n                        newOptions[index] = response.data.map(function(element) {\r\n                            return {\r\n                                label: element.label,\r\n                                value: element.urn,\r\n                            }\r\n                        });\r\n                        this.$data.paramsAutocompleteOptions = newOptions;\r\n                    }.bind(this));\r\n                }.bind(this));\r\n            \r\n        },\r\n        selectParam : function (selection, index) {\r\n            var newParams = this.$data.commandParamsValues.slice();\r\n            newParams[index] = selection;\r\n            this.$data.commandParamsValues = newParams;\r\n            \r\n        },\r\n        getParamValue(index) {\r\n            var actualValue = this.$data.commandParamsValues[index];\r\n            if (actualValue && actualValue.value) {\r\n                return actualValue;\r\n            }\r\n        },\r\n        backIfNeeded: function (index, isFirst) {\r\n            if (isFirst && !this.$data.commandParamsValues[0].value) {\r\n                this.back();\r\n            }\r\n            // otherwise nothing particular\r\n        },\r\n        back: function () {\r\n            this.$data.commandParamsValues = [];\r\n            this.$data.commands = [];\r\n            this.$data.isCommandCommited = false;\r\n            this.$data.selectedCommand = {};\r\n            this.$data.isExecuted = false;\r\n            this.$data.commandResult = {};\r\n            this.$data.paramsAutocompleteOptions = [];\r\n            this.$nextTick(function () {\r\n                this.$refs.commandInput.updateInputValue(this.$data.text);\r\n            });\r\n            \r\n        },\r\n        reset: function() {\r\n            this.back();\r\n            this.$data.text = \"\";\r\n        }\r\n    } \r\n\r\n}\r\n</script>","<template>\r\n    <span>\r\n        <q-btn round :flat=\"flat\" size=\"lg\" :color=\"color\" :text-color=\"textColor\" :icon=\"count>0?icon:iconNone\" @click=\"commentDrawer = !commentDrawer\" class=\"on-left\" :title=\"$q.lang.vui.comments.title\">\r\n            <q-badge floating small color=\"red\" v-if=\"count>0\" style=\"right:-.4em;top:-.4em;\">{{count}}</q-badge>\r\n        </q-btn>\r\n        <q-drawer overlay behavior=\"mobile\" :width=\"600\" v-model=\"commentDrawer\" side=\"right\" style=\"top:58px;\">\r\n            <q-list >\r\n                <q-item-label header><big>{{$q.lang.vui.comments.title}}</big></q-item-label>\r\n                <q-item>\r\n                <q-item-section><q-input class=\"col\" type=\"textarea\" autogrow v-model=\"commentTextArea\" :label=\"$q.lang.vui.comments.inputLabel\" stack-label></q-input></q-item-section>\r\n                    <q-item-section side><q-btn color=\"primary\" round icon=\"send\" :title=\"$q.lang.vui.comments.actionLabel\" :aria-label=\"$q.lang.vui.comments.actionLabel\" @click=\"publishComment\"></q-btn></q-item-section>\r\n            </q-item>\r\n                <q-separator />\r\n            <q-item v-for=\"comment in list\" :key=\"comment.uuid\" class=\"items-start\" v-bind:class=\"{'cursor-pointer': comment.author==connectedAccount}\">\r\n                    <q-item-section avatar> <q-avatar><img :src=\"baseUrl+'x/accounts/api/'+comment.author+'/photo'\"></q-avatar></q-item-section>\r\n                    <q-item-section>\r\n                        <q-item-label>{{comment.authorDisplayName}}</q-item-label>\r\n                        <div>\r\n                            {{comment.msg}}\r\n                        </div>\r\n                    </q-item-section>\r\n                    <q-item-section side>\r\n                        <q-item-label stamp>{{toDelay(new Date(comment.creationDate))}}</q-item-label>\r\n                        <q-icon name=\"edit\" v-if=\"comment.author==connectedAccount\"></q-icon>\r\n                    </q-item-section>\r\n                            <q-popup-edit v-if=\"comment.author==connectedAccount\" :buttons=\"true\" @save=\"updateComment(comment)\" :label-cancel=\"$q.lang.vui.comments.cancel\" :label-set=\"$q.lang.vui.comments.save\">\r\n                                <q-input type=\"textarea\" autogrow v-model=\"comment.msg\" dense ></q-input>\r\n                            </q-popup-edit>\r\n                </q-item>\r\n        </q-list>\r\n        </q-drawer>\r\n    </span>\r\n</template>\r\n<script>\r\nimport * as Quasar from \"quasar\"\r\n\r\nexport default {\r\n    props : {\r\n        concept : { type: String },\r\n        id : { type: String },\r\n        icon : { type: String, 'default': 'comment' },\r\n        iconNone : { type: String, 'default': 'add_comment' },\r\n        baseUrl : { type: String, 'default': '/api/', required:true },\r\n        connectedAccount : { type: String },\r\n        color : { type: String, 'default': 'primary'},\r\n        textColor : { type: String, 'default': 'white'},\r\n        flat : { type: Boolean, 'default': false}\r\n    },\r\n    data: function() {\r\n        return {\r\n            list: [],\r\n            count: 0,\r\n            commentDrawer: false,\r\n            commentTextArea :\"\"\t    \r\n        }\r\n    },\r\n    created: function() {\r\n        this.fetchCommentsList();\r\n\r\n    },\r\n    methods: {\r\n        fetchCommentsList: function() {\r\n            this.$http.get(this.baseUrl+'x/comment/api/comments?concept='+this.concept+'&id='+this.id)\r\n            .then( function (response) { //Ok\r\n                this.list = response.data;\r\n                this.count = this.list.length;\r\n            }.bind(this));\r\n        },\r\n        publishComment: function() {\r\n            var newComment = {\r\n                    msg : this.commentTextArea\r\n            };\r\n            if (newComment.msg){\r\n                newComment.concept = this.concept;\r\n                newComment.id = this.id;\r\n                this.$http.post(this.baseUrl+'x/comment/api/comments?concept='+this.concept+'&id='+this.id, newComment)\r\n                .then( function () { //Ok\r\n                    this.commentTextArea = '';\r\n                    this.fetchCommentsList();\r\n                }.bind(this));\r\n            }\r\n        },\r\n        updateComment: function(newComment) {\r\n            this.$http.put(this.baseUrl+'x/comment/api/comments/'+newComment.uuid, newComment)\r\n            .then( function () { //Ok\r\n                this.commentTextArea = '';\r\n                this.fetchCommentsList();\r\n            }.bind(this));\r\n        },\r\n        toDelay : function(creationDate) {\r\n            let diff = Quasar.date.getDateDiff(Date.now(),creationDate, 'days');\r\n            if(diff>0)\r\n                return diff+' days';\r\n            diff = Quasar.date.getDateDiff(Date.now(),creationDate, 'hours');\r\n            if(diff>0)\r\n                return diff+' hours';\r\n            diff = Quasar.date.getDateDiff(Date.now(),creationDate, 'minutes');\r\n            if(diff>0)\r\n                return diff+' min';\r\n            return 'Now';\t    \t\r\n        }\r\n    }\r\n\r\n}\r\n</script>","<template>\r\n    <div class=\"row q-col-gutter-md\">\r\n        <div v-for=\"extension in extensions\" class=\"col-xs-12 col-lg-6 col-xl-4\" :key=\"extension.name\"><q-card>\r\n            <q-item  class=\"bg-white\" style=\"height: 100px;\" >\r\n                <q-item-section avatar>\r\n                    <q-icon :name=\"extension.icon\" size=\"40px\" :style=\"getIconStyle(extension.color)\"></q-icon>\r\n                </q-item-section>\r\n                <q-item-section>\r\n                    <div class=\"row col items-center\"><div class=\"q-subheading text-bold\">{{extension.label}}</div><div class=\"col\"></div><div><q-toggle disable readonly color=\"positive\" v-model=\"extension.enabled\"></q-toggle></div></div>\r\n                    <div class=\"row col q-body-2 text-justify\">{{extension.description}}</div>\r\n                </q-item-section>\r\n            </q-item>\r\n        </q-card></div>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    props : {\r\n        activeSkills : { type: Array, required : true }\r\n    },\r\n    data: function() {\r\n        return {\r\n            extensions: [],\r\n        }\r\n    },\r\n    created: function() {\r\n        var availableExtensions = [\r\n                {name : \"vertigo-audit\", label : \"Audit\", description:\"Trace every single aspect of your app through exhaustive logging capabilities.\", color:\"#F7578C\", icon : \"fas fa-clipboard-list\", enabled : false },\r\n                {name : \"vertigo-dashboard\", label : \"Dashboard\", description:\"Monitor you system to make sure your app meets the customer requirements.\", color:\"#742774\", icon : \"fas fa-chart-line\", enabled : false },\r\n                {name : \"vertigo-geo\", label : \"Geo\", description:\"Enhance your data by enabling geographic functions and tools.\" , icon : \"fas fa-globe\", color:\"#0E2947\", enabled : false },\r\n                {name : \"vertigo-ledger\", label : \"Ledger\", description:\"Use a blockchain to enforce secure transactions in your app !\" , icon : \"fas fa-link\", color:\"#00AC5C\", enabled : false },\r\n                {name : \"vertigo-orchestra\", label : \"Orchestra\", description:\"Manage jobs and monitor their status with this powerfull control tower.\", color:\"#FC636B\", icon : \"fas fa-tasks\", enabled : false },\r\n                {name : \"vertigo-quarto\", label : \"Quarto\", description:\"Generate slick documents and reports using the Quarto template engine.\", color:\"#0747A6\", icon : \"fas fa-file-invoice\", enabled : false },\r\n                {name : \"vertigo-social\", label : \"Social\", description:\"Ensure real time communication and collaboration between your app users.\", color:\"#FF3366\", icon : \"far fa-comments\", enabled : false },\r\n                {name : \"vertigo-stella\", label : \"Stella\", description:\"Enable multi-node task dispatching for your app and assign specific tasks to each node.\", color:\"#0066FF\", icon : \"fas fa-network-wired\", enabled : false }\r\n        ];\r\n        \r\n        availableExtensions.forEach(function (availableExtension) {\r\n            availableExtension.enabled = this.$props.activeSkills.indexOf(availableExtension.name) > -1 ;\r\n        }.bind(this));\r\n\r\n        this.extensions = availableExtensions;\r\n    },\r\n    methods :  {\r\n        getIconStyle : function (color) {\r\n            return 'border: 3px solid '+ color+'; background-color: '+color+'; color: white; padding: 5px; width: 70px; height: 70px;';\r\n        }\r\n    }\r\n\r\n}\r\n</script>","<template>\r\n    <div class=\"facets\">\r\n        <div class=\"selectedFacets q-pb-md\" v-if=\"isAnyFacetValueSelected()\">\r\n            <div v-for=\"(selectedFacetValues, selectedFacet) in selectedFacets\" :key=\"selectedFacet\" >\r\n                <template v-if=\"!facetMultipleByCode(selectedFacet)\">\r\n                    <q-chip clickable class=\"q-mb-sm\" v-for=\"selectedFacetValue in selectedFacetValues\" :key=\"selectedFacetValue.code\"\r\n                        @click=\"$emit('toogle-facet', selectedFacet, selectedFacetValue, contextKey)\" icon-right=\"cancel\">{{facetLabelByCode(selectedFacet)}}: {{facetValueLabelByCode(selectedFacet, selectedFacetValue)}}\r\n                    </q-chip>\r\n                </template>\r\n            </div>\r\n        </div>\r\n        <q-list v-for=\"facet in facets\" :key=\"facet.code\" class=\"facetValues q-py-none\" dense >\r\n            <template v-if=\"facet.multiple || !isFacetSelected(facet.code)\">\r\n                <q-item-label header>{{facet.label}}</q-item-label>\r\n                <q-item v-for=\"(value) in selectedInvisibleFacets(facet.code)\" :key=\"value.code\" class=\"facetValue q-ml-md\" clickable @click=\"$emit('toogle-facet', facet.code, value.code, contextKey)\">\r\n                    <q-item-section side v-if=\"facet.multiple\" >\r\n                        <q-checkbox dense v-bind:modelValue=\"true\" @update:modelValue=\"$emit('toogle-facet', facet.code, value.code, contextKey)\" ></q-checkbox>\r\n                    </q-item-section>\r\n                    <q-item-section >{{facetValueLabelByCode(facet.code, value.code)}}</q-item-section> \r\n                    <q-item-section side>{{value.count}}</q-item-section>\r\n                </q-item>\r\n                \r\n                <q-item v-for=\"(value) in visibleFacets(facet.code, facet.values)\" :key=\"value.code\" class=\"facetValue q-ml-md\" clickable @click=\"$emit('toogle-facet', facet.code, value.code, contextKey)\">\r\n                    <q-item-section side v-if=\"facet.multiple\" >\r\n                        <q-checkbox dense v-bind:modelValue=\"isFacetValueSelected(facet.code, value.code)\" @update:modelValue=\"$emit('toogle-facet', facet.code, value.code, contextKey)\" ></q-checkbox>\r\n                    </q-item-section>\r\n                    <q-item-section >{{facetValueLabelByCode(facet.code, value.code)}}</q-item-section> \r\n                    <q-item-section side>{{value.count}}</q-item-section>\r\n                </q-item>\r\n                <q-item>\r\n                <q-btn flat v-if=\"facet.values.length > maxValues && !isFacetExpanded(facet.code)\" @click=\"expandFacet(facet.code)\" class=\"q-ma-none\">{{$q.lang.vui.facets.showAll}}</q-btn>\r\n                <q-btn flat v-if=\"facet.values.length > maxValues && isFacetExpanded(facet.code)\" @click=\"reduceFacet(facet.code)\" class=\"q-ma-none\">{{$q.lang.vui.facets.showLess}}</q-btn>\r\n                </q-item>\r\n            </template>\r\n        </q-list>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    props: {\r\n        facets: Array,\r\n        selectedFacets: Object,\r\n        contextKey: String,\r\n        facetValueTranslatorProvider : Function,\r\n        maxValues: {\r\n            type : Number,\r\n            default : 5\r\n        }\r\n  },\r\n  emits: [\"toogle-facet\"],\r\n  computed: {\r\n  },\r\n  data : function() {\r\n      return {\r\n          expandedFacets:[],\r\n          codeToLabelTranslater:{} /** facetCode : function (facetCode, facetValueCode) return facetValueLabel */\r\n      }\r\n  },\r\n  created : function() {\r\n    this.facetValueTranslatorProvider(this);\r\n  },\r\n  methods: {\r\n      addFacetValueTranslator(facetCode, facetValueCodeTranslator) {\r\n         this.codeToLabelTranslater[facetCode] = facetValueCodeTranslator;\r\n      },\r\n      facetByCode(facetCode) {\r\n          return this.facets.filter(function (facet) {\r\n              return facet.code === facetCode;\r\n          })[0];\r\n      },\r\n      facetValueByCode(facetCode, facetValueCode) {\r\n          return this.facetByCode(facetCode).values.filter(function (facetValue) {\r\n              return facetValue.code === facetValueCode;\r\n          })[0];\r\n      },\r\n      facetLabelByCode(facetCode) {\r\n          return this.facetByCode(facetCode).label;\r\n      },      \r\n      facetMultipleByCode(facetCode) {\r\n          return this.facetByCode(facetCode).multiple;\r\n      },\r\n      facetValueLabelByCode(facetCode, facetValueCode) {\r\n          if(this.codeToLabelTranslater[facetCode]) {\r\n            return this.codeToLabelTranslater[facetCode](facetCode, facetValueCode);\r\n          }\r\n          var facetValueByCode = this.facetValueByCode(facetCode,facetValueCode);\r\n          return facetValueByCode?facetValueByCode.label:facetValueCode; //might be not found\r\n      },\r\n      isFacetValueSelected(facetCode, facetValueCode){\r\n          return this.selectedFacets[facetCode].includes(facetValueCode);\r\n      },\r\n      isFacetSelected(facetCode){\r\n          if (this.selectedFacets[facetCode]) {\r\n              return this.selectedFacets[facetCode].length > 0;\r\n          }\r\n          return false;\r\n      },\r\n      isAnyFacetValueSelected() {\r\n          return Object.keys(this.selectedFacets).some(function (facetCode) {\r\n              return !this.facetMultipleByCode(facetCode);\r\n          }.bind(this));\r\n      },\r\n      expandFacet(facetCode){\r\n          if (!this.isFacetExpanded(facetCode)) {\r\n              this.$data.expandedFacets.push(facetCode);\r\n          }\r\n      },\r\n      reduceFacet(facetCode){\r\n          if (this.isFacetExpanded(facetCode)) {\r\n              this.$data.expandedFacets.splice( this.$data.expandedFacets.indexOf(facetCode), 1);\r\n          }\r\n      },\r\n      isFacetExpanded(facetCode){\r\n         return this.$data.expandedFacets.includes(facetCode);\r\n      },\r\n      selectedInvisibleFacets(facetCode) {\r\n          return this.selectedFacets[facetCode]\r\n             .filter( facetValueCode => !this.facetValueByCode(facetCode, facetValueCode) )\r\n             .map(facetValueCode => { \r\n              var obj = {}; \r\n              obj.code=facetValueCode; \r\n              obj.label=facetValueCode; \r\n              obj.count=0; \r\n              return obj; \r\n          });\r\n      },\r\n      visibleFacets(facetCode, facetValues) {\r\n          if (!this.isFacetExpanded(facetCode)) {\r\n              return  facetValues.slice(0, this.maxValues);\r\n          }\r\n          return facetValues;\r\n      }\r\n  }\r\n}\r\n</script>","<template>\r\n    <div class=\"row\">\r\n        <q-input label=\"Longitude\" stack-label  v-model.number=\"inputObject.lon\" @update:modelValue=\"updateJson\" ></q-input>\r\n        <q-input label=\"Latitude\" stack-label  v-model.number=\"inputObject.lat\" @update:modelValue=\"updateJson\" ></q-input>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    props : {\r\n        modelValue: { type: Object}\r\n    },\r\n    emits: [\"update:modelValue\"],\r\n    data : function () {\r\n        return {\r\n            inputObject : this.$props.modelValue ? this.$props.modelValue : {}\r\n        }\r\n    },\r\n    watch: { \r\n          modelValue: function(newVal) {\r\n              this.$data.inputObject = newVal ? newVal : {};\r\n              this.updateJson();\r\n          }\r\n    },\r\n    beforeMount() {\r\n        this.updateJson();\r\n        \r\n    },\r\n    methods: {\r\n        updateJson() {\r\n        var newInputValue;\r\n        if(this.$props.modelValue) {\r\n          newInputValue = JSON.stringify({  lon : this.$data.inputObject.lon, lat : this.$data.inputObject.lat});\r\n          this.$props.modelValue['_v_inputValue'] = newInputValue;\r\n        } else {\r\n          //this.$set(this.$props.value, null );\r\n        }        \r\n        this.$emit('update:modelValue', this.$data.inputObject);        \r\n      }\r\n    }\r\n}\r\n</script>","<template>\r\n    <div>\r\n        <q-input :placeholder=\"$q.lang.vui.handles.placeholder\" v-model=\"text\"  :debounce=\"300\" @input=\"searchHandles\" autofocus outlined bg-color=\"white\" dense >\r\n            <template v-slot:prepend><q-icon name=\"search\" /></template>\r\n        </q-input>\r\n        <q-list bordered dense separator>\r\n            <q-item clickable v-ripple v-for=\"handle in handles\" @click=\"VUi.methods.goTo(baseUrl + 'hw/' + handle.code )\" :key=\"handle.code\" >\r\n                <q-item-section>\r\n                {{handle.code}}\r\n                </q-item-section>\r\n            </q-item>\r\n        </q-list>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    props : {\r\n        baseUrl : { type: String, 'default': '/' },\r\n    },\r\n    data: function() {\r\n        return {\r\n            text: \"\",\r\n            handles: []\r\n        }\r\n    },\r\n    methods : {\r\n        searchHandles : function(val) {\r\n            if(val) {\r\n                this.$http.post(this.baseUrl+'api/vertigo/handle/_search', {prefix: val} )\r\n                    .then( function (response) { //Ok\r\n                        this.$data.handles = response.data;\r\n                }.bind(this));\r\n            }\r\n        }\r\n    } \r\n}\r\n</script>","<template>\r\n    <div class=\"row\">\r\n        <div v-for=\"(value, key) in jsonAsObject\" :key=\"key\" :class=\"'col-'+(12/cols)\">\r\n            <q-input  v-if=\"!readonly\" :label=\"key\" orientation=\"vertical\" stack-label  v-model=\"jsonAsObject[key]\" @update:modelValue=\"updateJson\" ></q-input>\r\n            <q-field v-else :label=\"key\" orientation=\"vertical\" stack-label borderless readonly>\r\n                <span >{{value}}</span>\r\n            </q-field>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    props : {\r\n        modelValue: { type: String, required: true},\r\n        readonly : { type: Boolean, required: true },\r\n        cols : { type: Number, 'default': 2 }\r\n    },\r\n    emits: [\"update:modelValue\"],\r\n    data : function () {\r\n        return {\r\n            jsonAsObject : JSON.parse(this.$props.modelValue)\r\n        }\r\n    },\r\n    watch: { \r\n          modelValue: function(newVal) {\r\n              this.$data.jsonAsObject = JSON.parse(newVal);\r\n          }\r\n    },\r\n    methods: {\r\n        updateJson() {\r\n          this.$emit('update:modelValue', JSON.stringify(this.$data.jsonAsObject));\r\n        }\r\n      }\r\n}\r\n</script>","<template>\r\n    <q-btn round :flat=\"!hasNew\" dense :color=\"hasNew?'accent':'secondary'\" :text-color=\"hasNew?'accent-inverted':'secondary-inverted'\" :icon=\"count>0?icon:iconNone\" class=\"on-left\" >\r\n        <q-badge color=\"red\" text-color=\"white\" floating v-if=\"count>0\" >{{count}}</q-badge>\r\n        <q-menu class=\"notifications\">\r\n            <q-list style=\"width:300px\">\r\n                <q-item v-for=\"notif in list\" :key=\"notif.uuid\" tag=\"a\" :href=\"notif.targetUrl\" >\r\n                    <q-item-section avatar><q-icon :name=\"toIcon(notif.type)\" size=\"2rem\"></q-icon></q-item-section>\r\n                    <q-item-section><q-item-label>{{notif.title}}</q-item-label><q-item-label caption lines=\"3\">{{notif.content}}</q-item-label></q-item-section>\r\n                    <q-item-section side top>\r\n                        <q-item-label caption>{{toDelay(new Date(notif.creationDate))}}</q-item-label>\r\n                    </q-item-section>\r\n                </q-item>\r\n            </q-list>\r\n        </q-menu>\r\n    </q-btn>\r\n</template>\r\n<script>\r\nimport * as Quasar from \"quasar\"\r\n\r\nexport default {\r\n    props : {\r\n        icon : { type: String, 'default': 'notifications' },\r\n        iconNone : { type: String, 'default': 'notifications_none' },\r\n        typeIconMap : { type: Object, 'default': function() { return {} } },\r\n        baseUrl : { type: String, 'default': '/api/', required:true }\r\n    },\r\n    data: function() {\r\n        return {\r\n            firstCall : true,\r\n            list: [],\r\n            hasNew : false,\r\n            wasError : false,\r\n            count: 0,\r\n            timer: ''\r\n        }\r\n    },\r\n    created: function() {\r\n        this.fetchNotificationsList();\r\n        this.timer = setInterval(this.fetchNotificationsList, 5000)\r\n\r\n    },\r\n    methods: {\r\n        fetchNotificationsList: function() {\r\n            this.$http.get(this.baseUrl+'x/notifications/api/messages', { timeout:5*1000, })\r\n            .then( function (response) { //Ok\r\n                this.updateNotificationsData(response.data);\r\n                if(this.wasError) {\r\n                    clearInterval(this.timer);\r\n                    this.timer = setInterval(this.fetchNotificationsList, 5000);\r\n                }\r\n                this.wasError = false;\r\n            }.bind(this))\r\n            .catch(function  () { //Ko\r\n                if(!this.wasError) {\r\n                    clearInterval(this.timer);\r\n                    this.timer = setInterval(this.fetchNotificationsList, 60000);\r\n                }\r\n                this.wasError = true;\r\n            }.bind(this));\r\n        },\r\n        updateNotificationsData : function (newList) {\r\n            // Tri par ordre décroissant de date de création\r\n            const sortedList = newList.sort(function(a,b) {return  b.creationDate - a.creationDate});\r\n            var newElements = [];\t    \t\r\n            // Traverse both arrays simultaneously.\r\n            var lastOldElement = this.list[0];\r\n            if(!lastOldElement) {\r\n                newElements = sortedList;\r\n            } else {\r\n                for(var newIdx = 0; newIdx < sortedList.length; newIdx++) {\r\n                    if( sortedList[newIdx].uuid != lastOldElement.uuid) {\r\n                        if(sortedList[newIdx].creationDate < lastOldElement.creationDate) {\r\n                            break;\r\n                        } else {\r\n                            newElements.push(sortedList[newIdx]);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            // Mise à jour des notifications\r\n            this.list = sortedList;\r\n            // Met à jour le nombre total de notifications\r\n            this.count = sortedList.length;\r\n            this.hasNew = newElements.length>0;\r\n            if(!this.firstCall) {\r\n                newElements.forEach(function(notif) {\r\n                    this.$q.notify({ \r\n                        type : 'info',\r\n                        icon : this.toIcon(notif.type),\r\n                        message : notif.title,\r\n                        detail : notif.content,\r\n                        timeout : 3000,\r\n                        position : 'bottom-right'\r\n                    })\r\n                }.bind(this));\r\n            }\r\n            \r\n            // Booléen indiquant s'il s'agit du premier appel à la MaJ des notifications\r\n            this.firstCall = false;\t    \t\r\n        },\t    \r\n        cancelAutoUpdate: function() { clearInterval(this.timer) },\r\n        toIcon : function(type) {\r\n            var typeIcon = this.typeIconMap[type];\r\n            return typeIcon?typeIcon:'mail';\r\n        },\r\n        toDelay : function(creationDate) {\r\n            let diff = Quasar.date.getDateDiff(Date.now(),creationDate, 'days');\r\n            if(diff>0)\r\n                return diff+' '+ this.$q.lang.vui.notifications.days;\r\n            diff = Quasar.date.getDateDiff(Date.now(),creationDate, 'hours');\r\n            if(diff>0)\r\n                return diff+' '+ this.$q.lang.vui.notifications.hours;\r\n            diff = Quasar.date.getDateDiff(Date.now(),creationDate, 'minutes');\r\n            if(diff>0)\r\n                return diff+' ' +this.$q.lang.vui.notifications.minutes;\r\n            diff = Quasar.date.getDateDiff(Date.now(),creationDate, 'seconds');\r\n            return diff+' '+this.$q.lang.vui.notifications.seconds;\t    \t\r\n        }\r\n        \r\n\r\n    },\r\n    beforeDestroy : function() {\r\n      clearInterval(this.timer)\r\n    }\r\n}\r\n</script>","<template>\r\n    <div :id=\"id\">\r\n        <slot v-bind=\"$attrs\"></slot>\r\n    </div>\r\n</template>\r\n<script>\r\nimport * as Quasar from \"quasar\"\r\nimport * as ol from \"ol\"\r\n\r\n\r\nexport default {\r\n    props : {\r\n        id: { type: String, required: true},\r\n        initialZoomLevel : { type: Number},\r\n        initialCenter : { type: Object },\r\n        search: { type: Boolean },\r\n        overview : { type: Boolean },\r\n    },\r\n    emits:[\"moveend\", \"click\"],\r\n    methods: {\r\n          onMapLoad: function(found) {\r\n            let vm = this;\r\n            function checkForMap() {\r\n              if (vm.olMap) {\r\n                found(vm.olMap);\r\n                vm.postInit()\r\n              } else {\r\n                setTimeout(checkForMap, 50);\r\n              }\r\n            }\r\n            checkForMap();\r\n          },\r\n          postInit() {\r\n              if (this.$props.initialZoomLevel) {\r\n                    this.olMap.getView().setZoom(this.$props.initialZoomLevel);\r\n               }\r\n          }\r\n    },\r\n    mounted : function() {        \r\n        let view = new ol.View();\r\n        const osmSource = new ol.source.OSM();\r\n        \r\n        let osmLayer = new ol.layer.Tile({\r\n            preload : 4,\r\n            source : osmSource\r\n        })\r\n        \r\n        const mapControls = [buildCustomControls()];\r\n        if (this.$props.overview) {\r\n            mapControls.push(new ol.control.OverviewMap({layers: [new ol.layer.Tile({source: osmSource}),],}));\r\n        }\r\n        if (this.$props.search && (typeof Geocoder === 'function')) {\r\n            // this functionnality needs https://unpkg.com/ol-geocoder@4.3.1/dist/ol-geocoder.js and https://unpkg.com/ol-geocoder@4.3.1/dist/ol-geocoder.min.css\r\n            // see https://github.com/Dominique92/ol-geocoder\r\n        \tmapControls.push(new Geocoder('nominatim', {\r\n                provider: 'osm',\r\n                lang: this.$q.lang.isoName,\r\n                placeholder: 'Search for ...',\r\n                limit: 5,\r\n                debug: false,\r\n                autoComplete: true,\r\n                keepOpen: true,\r\n                preventMarker: true,\r\n                defaultFlyResolution: 19,\r\n            }));\r\n        }\r\n        \r\n        this.olMap = new ol.Map({\r\n            interactions: ol.interaction.defaults.defaults({\r\n              onFocusOnly: true\r\n            }),\r\n            target : this.$props.id,\r\n            layers : [ osmLayer ],\r\n            // Improve user experience by loading tiles while animating. Will make animations stutter on mobile or slow devices.\r\n            loadTilesWhileAnimating : true,\r\n            view : view,\r\n            controls: ol.control.defaults.defaults().extend(mapControls),\r\n        });\r\n        \r\n        if (this.$props.initialCenter) {\r\n            this.olMap.getView().setCenter(ol.proj.fromLonLat([this.$props.initialCenter.lon, this.$props.initialCenter.lat]));\r\n        }\r\n        \r\n        // handle refresh if an endPoint is specified\r\n        this.olMap.on('moveend', function(e) {\r\n            let mapExtent =  e.map.getView().calculateExtent();\r\n            let wgs84Extent = ol.proj.transformExtent(mapExtent, 'EPSG:3857', 'EPSG:4326');\r\n            let topLeft = ol.extent.getTopLeft(wgs84Extent);\r\n            let bottomRight = ol.extent.getBottomRight(wgs84Extent);\r\n            Quasar.debounce(this.$emit('moveend',topLeft, bottomRight) , 300);        \r\n        }.bind(this));\r\n        \r\n        setTimeout(function () {\r\n            this.olMap.on('click', function(evt) {\r\n                evt.stopPropagation();\r\n                Quasar.debounce(this.$emit('click',ol.proj.transform(evt.coordinate, 'EPSG:3857', 'EPSG:4326')) , 300);\r\n            }.bind(this)); \r\n        }.bind(this), 300); \r\n    }\r\n}\r\n\r\nfunction buildCustomControls() {\r\n    return new class VCustomControls extends ol.control.Control {\r\n       /**\r\n        * @param {Object} [opt_options] Control options.\r\n        */\r\n       constructor(opt_options) {\r\n          const options = opt_options || {};\r\n        \r\n          const element = document.createElement('div');\r\n          element.className = 'ol-v-custom-buttons ol-unselectable ol-control';\r\n        \r\n          super({\r\n             element: element,\r\n             target: options.target,\r\n          });\r\n       }\r\n    }\r\n}\r\n</script>","<template>\r\n    <div :id=\"id\" >\r\n        <div :id=\"id+'Popup'\">\r\n            <q-card v-if=\"popupDisplayed\" class=\"q-px-md\">\r\n                <slot name=\"card\" v-bind:objectDisplayed=\"objectDisplayed\">\r\n                      <div class=\"text-subtitle2\">{{objectDisplayed[nameField]}}</div>\r\n                </slot>\r\n            </q-card>\r\n        </div>\t\r\n    </div>\r\n</template>\r\n<script>\r\nimport * as Quasar from \"quasar\"\r\nimport * as ol from \"ol\"\r\n\r\nexport default {\r\n    props : {\r\n        id: { type: String, required: true},\r\n        list : { type: Array },\r\n        cluster : { type: Array },\r\n        object : { type: Object },\r\n        objectEditable: {type: Boolean },\r\n        fitOnDataUpdate: {type: Boolean },\r\n        baseUrl : { type: String },\r\n        field: { type: String, required: true},\r\n        nameField: { type: String},        \r\n        markerColor : { type: String, 'default': \"#000000\" },\r\n        markerFont : { type: String, 'default': \"Material Icons\" },\r\n        markerIcon : { type: String, 'default': \"place\" },\r\n        markerSize : { type: Number, 'default': 30 },\r\n        clusterCircleSize: { type: Number, 'default': 20 },\r\n        clusterColor: { type: String, 'default': \"#fff\" },\r\n        clusterCircleBorderColor: { type: String, 'default': \"#000000\" },\r\n        clusterTextColor: { type: String, 'default': \"#000000\" },\r\n        clusterTextSize: { type: Number, 'default': 12 },\r\n        clusterTextFont: { type: String, 'default' : 'sans-serif' },\r\n    },\r\n    emits : [\"moveend\", \"click\"],\r\n    data : function () {\r\n        return {\r\n            popupDisplayed : false,\r\n            objectDisplayed: {},\r\n            items: [],\r\n            _itemsCoordString: null,\r\n            clusters: [],\r\n            _clusterCoordString: null,\r\n            olMap: {},\r\n            vectorSource : {},\r\n            base32 : '0123456789bcdefghjkmnpqrstuvwxyz' // (geohash-specific) Base32 map\r\n            \r\n        }\r\n    },\r\n    watch : {\r\n        // watch list, cluster and object but filter to only process when desired field ('field' prop, eg geoLocation) is modified\r\n        list : {\r\n           handler(newVal) {\r\n              if (!!newVal) {\r\n                  // console.log('watch list');\r\n                  let newItemsCoordString = this.computeCoordString(newVal);\r\n                  \r\n                  if (!!this._itemsCoordString && newItemsCoordString !== this._itemsCoordString) {\r\n                      this.$data.items = newVal;\r\n                      this.updateMap();\r\n                  }\r\n                  this._itemsCoordString = newItemsCoordString;\r\n              }\r\n           },\r\n           deep: true,\r\n           immediate: true, // initialize _itemsCoordString\r\n        },\r\n        cluster : {\r\n           handler(newVal) {\r\n              if (!!newVal) {\r\n                  // console.log('watch cluster');\r\n                  let newClusterCoordString = this.computeCoordString(newVal);\r\n                  \r\n                  if (!!this._clusterCoordString && newClusterCoordString !== this._clusterCoordString) {\r\n                      this.$data.items = [];\r\n                      this.$data.clusters = [];\r\n                      for(let i =0 ; i< newVal.length; i++) {\r\n                          if(newVal[i].totalCount == 1) {\r\n                              this.$data.items = this.$data.items.concat(newVal[i].list);\r\n                          } else {\r\n                              this.$data.clusters.push({\r\n                                  geoHash:newVal[i].code,\r\n                                  geoLocation:this.decode(newVal[i].code),\r\n                                  totalCount:newVal[i].totalCount\r\n                              });\r\n                          }\r\n                      }\r\n                      this.updateMap();\r\n                  }\r\n                  this._clusterCoordString = newClusterCoordString;\r\n              }\r\n           },\r\n           deep: true,\r\n           immediate: true, // initialize _clusterCoordString\r\n        },\r\n        object : {\r\n           handler(newVal) {\r\n              if (!!newVal) {\r\n                   // console.log('watch object');\r\n                   let newItemsCoordString = this.computeCoordString(newVal);\r\n                   \r\n                   if (!!this._itemsCoordString && newItemsCoordString !== this._itemsCoordString) {\r\n                       this.updateMap();\r\n                   }\r\n                   this._itemsCoordString = newItemsCoordString;\r\n               }\r\n           },\r\n           deep: true,\r\n           immediate: true, // initialize _itemsCoordString\r\n        },\r\n    },\r\n    computed : {\r\n        features: function() {\r\n            let geoField = this.$props.field;\r\n            let arrayOfFeatures = this.$data.items\r\n            .filter(function(object) {\r\n                return object[geoField]!=null;\r\n            }).map(function(object) {\r\n                let geoObject;\r\n                if (typeof object[geoField] === 'string' || object[geoField] instanceof String){\r\n                    geoObject = JSON.parse(object[geoField]);\r\n                } else {\r\n                    geoObject = object[geoField];\r\n                }\r\n                if(geoObject != null) {\r\n                    let iconFeature = new ol.Feature({\r\n                        geometry : new ol.geom.Point(ol.proj.fromLonLat([ geoObject.lon, geoObject.lat ])),\r\n                    });\r\n                    \r\n                    if (this.$props.nameField) {\r\n                        iconFeature.set('name', object[this.$props.nameField]);\r\n                        iconFeature.set('innerObject', object);\r\n                        iconFeature.set('totalCount', object.totalCount);\r\n                    }\r\n                    return iconFeature;\r\n                } \r\n                return null;\r\n            }.bind(this));\r\n            \r\n            let arrayOfClusterFeatures = this.$data.clusters\r\n            .filter(function(object) {\r\n                return object[geoField]!=null;\r\n            }).map(function(object) {\r\n                let geoObject;\r\n                if (typeof object[geoField] === 'string' || object[geoField] instanceof String){\r\n                    geoObject = JSON.parse(object[geoField]);\r\n                } else {\r\n                    geoObject = object[geoField];\r\n                }\r\n                if(geoObject != null) {\r\n                    let iconFeature = new ol.Feature({\r\n                        geometry : new ol.geom.Point(ol.proj.fromLonLat([ geoObject.lon, geoObject.lat ])),\r\n                    });\r\n                    \r\n                    if (this.$props.nameField) {\r\n                        iconFeature.set('name', object[this.$props.nameField]);\r\n                        iconFeature.set('innerObject', object);\r\n                        iconFeature.set('totalCount', object.totalCount);\r\n                    }\r\n                    return iconFeature;\r\n                } \r\n                return null;\r\n            }.bind(this));\r\n            return arrayOfFeatures.concat(arrayOfClusterFeatures);\r\n        }\r\n    },\r\n    methods : {\r\n        fitView: function() {\r\n            if (this.features.length > 0) {\r\n                let maxZoom = 19;\r\n                let maxZoomResolved = this.features.length == 1 ? Math.min(this.olMap.getView().getZoom()||maxZoom, maxZoom) // keep zoom if < maxZoom\r\n                                                                : maxZoom; // if multiple features, dont keep zoom but dont zoom > maxZoom\r\n                let extentPadded = ol.geom.Polygon.fromExtent(this.$data.vectorSource.getExtent())\r\n                extentPadded.scale(1.2);\r\n                this.olMap.getView().fit(extentPadded, {size : this.olMap.getSize(), maxZoom : maxZoomResolved, duration: 750});\r\n            }\r\n        },\r\n        fetchList: function(topLeft, bottomRight) {\r\n            this.$http.get(this.baseUrl+'_geoSearch?topLeft=\"'+ topLeft.lat+','+topLeft.lon+'\"&bottomRight=\"'+ bottomRight.lat+','+bottomRight.lon+ '\"', { timeout:5*1000, })\r\n            .then( function (response) { //Ok\r\n                this.$data.items = response.data;\r\n                this.$data.vectorSource.clear();\r\n                this.$data.vectorSource.addFeatures(this.features);\r\n            }.bind(this));\r\n        },\r\n        computeCoordString: function(value) {\r\n            let valueCoord;\r\n            if (Array.isArray(value)) {\r\n                if (!!this.$props.cluster) {\r\n                    valueCoord = value.map(el => this.decode(el.code));\r\n                } else {\r\n                    valueCoord = value.map(el => el[this.$props.field]);\r\n                } \r\n            } else {\r\n                valueCoord = value[this.$props.field];\r\n            }\r\n            return JSON.stringify(valueCoord);\r\n        },\r\n        updateMap: function() {\r\n            this.$data.vectorSource.clear();\r\n            this.$data.vectorSource.addFeatures(this.features);\r\n            if (this.$props.fitOnDataUpdate) {\r\n                this.fitView();\r\n            }\r\n        },\r\n         /**\r\n         * Decode geohash to latitude/longitude (location is approximate centre of geohash cell,\r\n         *     to reasonable precision).\r\n         *\r\n         * @param   {string} geohash - Geohash string to be converted to latitude/longitude.\r\n         * @returns {{lat:number, lon:number}} (Center of) geohashed location.\r\n         * @throws  Invalid geohash.\r\n         *\r\n         * @example\r\n         *     const latlon = Geohash.decode('u120fxw'); // => { lat: 52.205, lon: 0.1188 }\r\n         */\r\n        decode : function (geohash) {\r\n            const bounds = this.bounds(geohash); // <-- the hard work\r\n            // now just determine the centre of the cell...\r\n            const latMin = bounds.sw.lat, lonMin = bounds.sw.lon;\r\n            const latMax = bounds.ne.lat, lonMax = bounds.ne.lon;\r\n            // cell centre\r\n            let lat = (latMin + latMax)/2;\r\n            let lon = (lonMin + lonMax)/2;\r\n            // round to close to centre without excessive precision: ⌊2-log10(Δ°)⌋ decimal places\r\n            lat = lat.toFixed(Math.floor(2-Math.log(latMax-latMin)/Math.LN10));\r\n            lon = lon.toFixed(Math.floor(2-Math.log(lonMax-lonMin)/Math.LN10));\r\n            return { lat: Number(lat), lon: Number(lon) };\r\n        },\r\n        /**\r\n         * Returns SW/NE latitude/longitude bounds of specified geohash.\r\n         *\r\n         * @param   {string} geohash - Cell that bounds are required of.\r\n         * @returns {{sw: {lat: number, lon: number}, ne: {lat: number, lon: number}}}\r\n         * @throws  Invalid geohash.\r\n         */\r\n        bounds : function(geohash) {\r\n            if (geohash.length == 0) throw new Error('Invalid geohash');\r\n            geohash = geohash.toLowerCase();\r\n            let evenBit = true;\r\n            let latMin =  -90, latMax =  90;\r\n            let lonMin = -180, lonMax = 180;\r\n            for (let i=0; i<geohash.length; i++) {\r\n                const chr = geohash.charAt(i);\r\n                const idx = this.$data.base32.indexOf(chr);\r\n                if (idx == -1) throw new Error('Invalid geohash');\r\n                for (let n=4; n>=0; n--) {\r\n                    const bitN = idx >> n & 1;\r\n                    if (evenBit) {\r\n                        // longitude\r\n                        const lonMid = (lonMin+lonMax) / 2;\r\n                        if (bitN == 1) {\r\n                            lonMin = lonMid;\r\n                        } else {\r\n                            lonMax = lonMid;\r\n                        }\r\n                    } else {\r\n                        // latitude\r\n                        const latMid = (latMin+latMax) / 2;\r\n                        if (bitN == 1) {\r\n                            latMin = latMid;\r\n                        } else {\r\n                            latMax = latMid;\r\n                        }\r\n                    }\r\n                    evenBit = !evenBit;\r\n                }\r\n            }\r\n            const bounds = {\r\n                sw: { lat: latMin, lon: lonMin },\r\n                ne: { lat: latMax, lon: lonMax },\r\n            };\r\n            return bounds;\r\n        }\r\n        \r\n    },\r\n   \r\n    mounted : function() {\r\n        this.$parent.onMapLoad( function( olMap ) {\r\n            this.$data.olMap = olMap;\r\n            this.$data.items = [];\r\n            this.$data.clusters = [];\r\n            if(this.$props.list) {\r\n                this.$data.items = this.$props.list\r\n            } else if(this.$props.cluster) {\r\n                for(let i =0 ; i< this.$props.cluster.length; i++) {\r\n                    if(this.$props.cluster[i].totalCount == 1) {\r\n                        this.$data.items = this.$data.items.concat(this.$props.cluster[i].list);                        \r\n                    } else {\r\n                        this.$data.clusters.push({\r\n                        geoHash:this.$props.cluster[i].code,\r\n                        geoLocation:this.decode(this.$props.cluster[i].code),\r\n                        totalCount:this.$props.cluster[i].totalCount});\r\n                    }\r\n                }\r\n            } else  if(this.$props.object) {\r\n                this.$data.items = [this.$props.object];\r\n            }\r\n            this.$data.vectorSource = new ol.source.Vector({\r\n                features : this.features\r\n            });\r\n            \r\n            let clusterSource = new ol.source.Cluster({\r\n                source: this.$data.vectorSource,\r\n                distance : 2*this.$props.clusterCircleSize\r\n            });\r\n            let clusterLayer = new ol.layer.Vector({\r\n                source: clusterSource\r\n            });\r\n            \r\n            let styleIcon = new ol.style.Style({\r\n                text : new ol.style.Text({\r\n                    font : this.$props.markerSize +'px ' + this.$props.markerFont,\r\n                    text : this.$props.markerIcon,\r\n                    fill : new ol.style.Fill({color : this.$props.markerColor }),\r\n                    offsetY : 0\r\n                })\r\n            });\r\n            \r\n            let styleCache = {};\r\n            clusterLayer.setStyle(function(feature, /*resolution*/) {\r\n                let size = 0;\r\n                let agregateFeatures = feature.get('features');\r\n                for(let i = 0; i<agregateFeatures.length;i++) {\r\n                    let fSize = agregateFeatures[i].get('totalCount');\r\n                    size += !fSize?1:fSize;\r\n                }\r\n                if (!size || size == 1) {\r\n                    return styleIcon;\r\n                } else {\r\n                      // otherwise show the number of features\r\n                      let style = styleCache[size];\r\n                      if (!style) {\r\n                        style = new ol.style.Style({\r\n                          image: new ol.style.Circle({\r\n                            radius: this.$props.clusterCircleSize,\r\n                            stroke: new ol.style.Stroke({\r\n                                color: this.$props.clusterCircleBorderColor\r\n                              }),\r\n                            fill: new ol.style.Fill({\r\n                              color: this.$props.clusterColor\r\n                            })\r\n                          }),\r\n                          text: new ol.style.Text({\r\n                            text: size.toString(),\r\n                            font : this.$props.clusterTextSize +'px ' + this.$props.clusterTextFont,\r\n                            fill: new ol.style.Fill({\r\n                              color: this.$props.clusterTextColor\r\n                            })\r\n                          })\r\n                        });\r\n                        styleCache[size] = style;\r\n                      }\r\n                      return style;\r\n                }\r\n            }.bind(this));\r\n            \r\n            this.olMap.addLayer(clusterLayer); \r\n            \r\n            // fit view\r\n            this.fitView();\r\n                \r\n            // handle refresh if an endPoint is specified\r\n            this.olMap.on('moveend', function(e) {\r\n                let mapExtent =  e.map.getView().calculateExtent();\r\n                let wgs84Extent = ol.proj.transformExtent(mapExtent, 'EPSG:3857', 'EPSG:4326');\r\n                let topLeft = ol.extent.getTopLeft(wgs84Extent);\r\n                let bottomRight = ol.extent.getBottomRight(wgs84Extent);\r\n                if (this.baseUrl) {\r\n                   Quasar.debounce(this.fetchList({lat:topLeft[0] , lon:topLeft[1]},{lat:bottomRight[0] , lon:bottomRight[1]}),300);\r\n                }\r\n                Quasar.debounce(this.$emit('moveend',topLeft, bottomRight) , 300);\t\t\r\n            }\r\n            .bind(this));        \r\n            \r\n            if (this.$props.nameField) {\r\n                let popup = new ol.Overlay({\r\n                    element: this.$el.querySelector('#'+this.$props.id+'Popup'),\r\n                    positioning: 'bottom-center',\r\n                    stopEvent: false,\r\n                    offset: [0, -20]\r\n                  });\r\n                this.olMap.addOverlay(popup);\r\n                // display popup on click\r\n                this.olMap.on('click', function(evt) {\r\n                  let feature = this.olMap.forEachFeatureAtPixel(evt.pixel,\r\n                    function(feature) {\r\n                      return feature;\r\n                    });\r\n                  if (feature && feature.get('features') && feature.get('features').length == 1) {\r\n                    let coordinates = feature.getGeometry().getCoordinates();\r\n                    popup.setPosition(coordinates);\r\n                    this.$data.popupDisplayed = true;\r\n                    this.$data.objectDisplayed = feature.get('features')[0].get('innerObject');\r\n                    evt.stopPropagation();\r\n                    Quasar.debounce(this.$emit('click',ol.proj.transform(coordinates, 'EPSG:3857', 'EPSG:4326')) , 300);\r\n                  } else {\r\n                      this.$data.popupDisplayed = false;\r\n                  }\r\n                }.bind(this));\r\n                  \r\n                // change mouse cursor when over marker\r\n                this.olMap.on('pointermove', function(e) {\r\n                    if (e.dragging) {\r\n                        this.$data.popupDisplayed = false;\r\n                      return;\r\n                    }\r\n                    let pixel = this.olMap.getEventPixel(e.originalEvent);\r\n                    let hit = this.olMap.hasFeatureAtPixel(pixel);\r\n                    this.olMap.getTargetElement().style.cursor = hit ? 'pointer' : '';\r\n                }.bind(this));\r\n            } else {\r\n                this.olMap.on('click', function(evt) {\r\n                  let feature = this.olMap.forEachFeatureAtPixel(evt.pixel,\r\n                    function(feature) {\r\n                      return feature;\r\n                    });\r\n                  if (feature && feature.get('features') && feature.get('features').length == 1) {\r\n                    let coordinates = feature.getGeometry().getCoordinates();\r\n                    evt.stopPropagation();\r\n                    Quasar.debounce(this.$emit('click',ol.proj.transform(coordinates, 'EPSG:3857', 'EPSG:4326')) , 300);\r\n                  }\r\n                }.bind(this));\r\n            }\r\n            \r\n            if (this.$props.object && this.$props.objectEditable) {\r\n               let draw = new ol.interaction.Draw({\r\n                  source: this.$data.vectorSource,\r\n                  type: \"Point\",\r\n               });\r\n               draw.on('drawend', (event) => {\r\n                  let feature = event.feature;\r\n                  let coord = ol.proj.toLonLat(feature.getGeometry().getCoordinates());\r\n                  \r\n                  this.$data.vectorSource.clear();\r\n                  this.olMap.removeInteraction(draw);\r\n                  button.classList.remove(\"active\");\r\n                  \r\n                  this.$props.object[this.$props.field] = {\r\n                     lon:coord[0],\r\n                     lat:coord[1],\r\n                  };\r\n               });\r\n                        \r\n               const button = document.createElement('button');\r\n               button.innerHTML = '&#9678;';\r\n               button.addEventListener(\r\n                  'click',\r\n                  (evt) => {\r\n                     evt.preventDefault();\r\n                     \r\n                     if (button.classList.contains(\"active\")) {\r\n                        this.olMap.removeInteraction(draw);\r\n                        button.classList.remove(\"active\");\r\n                     } else {\r\n                        this.olMap.addInteraction(draw);\r\n                        draw = this.olMap.getInteractions().getArray().slice(-1)[0]; // update ref as it changes when added\r\n                        button.classList.add(\"active\");\r\n                     }\r\n                  },\r\n                  false);\r\n               \r\n               this.olMap.getViewport().getElementsByClassName(\"ol-v-custom-buttons\")[0].appendChild(button);\r\n            }\r\n        }.bind(this)); \r\n    }\r\n}\r\n</script>","<template>\r\n    <q-field v-bind=\"$attrs\" >\r\n        <template v-slot:append>\r\n            <q-icon name=\"arrow_drop_down\" />\r\n        </template>\r\n        <template v-slot:control>\r\n            <div class=\"self-center full-width no-outline\" tabindex=\"0\">{{ getSelectedLabel() }}</div>\r\n        </template>\r\n        <q-menu :breakpoint=\"600\" fit ref=\"menu\">\r\n            <q-tree :nodes=\"convertListToTree($props.list, $props.subTreeKey)\" \r\n                    :node-key=\"$props.keyField\" :label-key=\"$props.labelField\" \r\n                    v-model:expanded=\"expandedNodes\"\r\n                    @update:expanded=\"handleExpanded\" \r\n                    v-model:selected=\"selectedNode\" \r\n                    @update:selected=\"handleSelected\" >\r\n            </q-tree>\r\n        </q-menu>\r\n    </q-field>\r\n</template>\r\n<script>\r\nimport * as Quasar from \"quasar\"\r\n\r\nexport default {\r\n\tprops : {\r\n\t\tmodelValue:\t\t\t{ type: String, required: true},\r\n\t\tlist:          \t{ type: Array,  required: true },\r\n\t\tkeyField:     \t{ type: String,  required: true },\r\n\t\tlabelField:  \t{ type: String,  required: true },\r\n\t\tparentKeyField: { type: String,  required: true },\r\n\t\tsubTreeKey: \t{ type: String,  required: false },\r\n\t},\r\n\temits: [\"update:modelValue\"],\r\n\tdata: function () {\r\n\t\treturn {\r\n\t\t\tselectedNode: this.$props.modelValue,\r\n\t\t\texpandedNodes: [this.$props.modelValue]\r\n\t\t}\r\n\t},\r\n\twatch: { \r\n          modelValue: function(newVal) {\r\n              this.$data.selectedNode = newVal;\r\n          }\r\n    },\r\n\tmethods: {\r\n\t\thandleSelected: function(target) {\r\n\t\t\tthis.$emit('update:modelValue', this.$data.selectedNode);\r\n\t\t\tif (target) {\r\n\t\t\t\tthis.$refs.menu.hide()\r\n\t\t\t}\r\n\t\t},\r\n\t\thandleExpanded: function() {\r\n\t\t\tQuasar.debounce(this.$refs.menu.updatePosition, 500)();\r\n\t\t},\r\n\t\tgetSelectedLabel: function() {\r\n\t\t\tif (this.$data.selectedNode) {\r\n\t\t\t\tlet node =  this.$props.list\r\n\t\t\t\t\t.find(function(rse) { \r\n\t\t\t\t\t\treturn rse[this.$props.keyField] === this.$data.selectedNode \r\n\t\t\t\t\t}.bind(this));\r\n\t\t\t\treturn node[this.$props.labelField]\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tconvertListToTree: function (list, subTreeKey) {\r\n\t\t\tvar map = {}, node, roots = [], i, newList = [];\r\n\t\t\tfor (i = 0; i < list.length; i += 1) {\r\n\t\t\t\tmap[list[i][this.$props.keyField]] = i; // initialize the map\r\n\t\t\t\tnewList.push({...list[i], children : []}); // initialize the newList with children\r\n\t\t\t}\r\n\t\t\r\n\t\t\tfor (i = 0; i < list.length; i += 1) {\r\n\t\t\t\tnode = newList[i];\r\n\t\t\t\tif (node[this.$props.parentKeyField]) {\r\n\t\t\t\t\t// if you have dangling branches check that map[node.parentId] exists\r\n\t\t\t\t\tnewList[map[node[this.$props.parentKeyField]]].children.push(node);\r\n\t\t\t\t} else {\r\n\t\t\t\t\troots.push(node);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (subTreeKey) {\r\n\t\t\t\treturn [newList[map[subTreeKey]]];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn roots;\r\n\t\t}\r\n\t}\r\n}\r\n</script>","<template>\r\n    <q-uploader :url=\"$props.url\" \r\n            auto-upload\r\n            :field-name=\"$props.fieldName\"\r\n            :multiple=\"$props.multiple\"\r\n            :max-files=\"$props.multiple ? undefined : 1\"\r\n            :headers=\"[{name: 'Accept', value: 'application/json'}]\"\r\n            @uploaded=\"uploadedFiles\"\r\n            :readonly=\"$props.readonly || !globalCanAddFiles([])\"\r\n            v-bind=\"$attrs\"\r\n            ref=\"quasarUploader\">\r\n            <template v-if=\"$props.simple\" v-slot:header ></template> \r\n            <template v-else v-slot:header=\"slotProps\">\r\n\t\t            <div class=\"q-uploader__header-content flex flex-center no-wrap q-gutter-xs\">\r\n\t\t\t            <q-btn v-if=\"slotProps.queuedFiles.length > 0 && !slotProps.readonly\" type=\"a\" :icon=\"$q.iconSet.uploader.clear_all\" flat dense @click=\"slotProps.removeQueuedFiles\">\r\n\t\t\t               <q-tooltip>{{$q.lang.vui.uploader.clear_all}}</q-tooltip>\r\n\t\t\t            </q-btn>\r\n\t                    <div class=\"col column justify-center\">\r\n\t                      <div v-if=\"$props.label !== void 0\" class=\"q-uploader__title\">{{$props.label}}</div>\r\n\t\t\t              <div v-if=\"slotProps.isUploading\" class=\"q-uploader__subtitle\">{{getGlobalSize(slotProps.files)}} / {{slotProps.uploadProgressLabel}}</div>\r\n\t\t\t\t\t\t  <div v-else class=\"q-uploader__subtitle\">{{getGlobalSize(slotProps.files)}}</div>\r\n\t\t\t            </div>\r\n\t                    <q-spinner v-if=\"slotProps.isUploading\" class=\"q-uploader__spinner\"></q-spinner>\r\n\t                    <q-btn v-if=\"slotProps.isUploading  && !slotProps.readonly\" type=\"a\" :icon=\"$q.iconSet.uploader.clear\" flat dense @click=\"slotProps.abort\">\r\n\t                        <q-tooltip>{{$q.lang.vui.uploader.clear}}</q-tooltip>\r\n\t                    </q-btn>                    \r\n\t\t\t            <q-btn v-if=\"globalCanAddFiles(slotProps.files) && !slotProps.readonly\" type=\"a\" :icon=\"$q.iconSet.uploader.add\" flat dense>\r\n\t\t\t\t            <q-uploader-add-trigger></q-uploader-add-trigger>\r\n                            <q-tooltip>{{$q.lang.vui.uploader.add}}</q-tooltip>\r\n\t                    </q-btn>\r\n\t\t            </div>\r\n            </template> \r\n            <template v-slot:list=\"slotProps\">\r\n               <div class=\"row\">\r\n                <q-field :label-width=\"3\"\r\n                            :label=\"$props.simple ? $props.label : undefined\"\r\n                            class=\"col\"\r\n                            orientation=\"vertical\"\r\n                            stack-label\r\n                            borderless>\t\t\t\t        \r\n                        <template v-slot:control>\r\n                        <div class=\"col column justify-center\">\r\n                            <template v-if=\"!$props.readonly\" >\r\n                                <template v-for=\"file in slotProps.files\" :key=\"file.name\">\r\n                                    <div v-if=\"file.__status !== 'uploaded'\"\r\n                                        class=\"q-uploader__file relative-position\" \r\n                                        :class=\"{'q-uploader__file--failed': file.__status === 'failed',\r\n                                                'q-uploader__file--uploaded': file.__status === 'uploaded'}\">\r\n                                        <div class=\"q-uploader__file-header row flex-center no-wrap\" >\r\n                                            <q-icon v-if=\"file.__status === 'failed'\" class=\"q-uploader__file-status\" :name=\"$q.iconSet.type.negative\" color=\"negative\"></q-icon>\r\n                                            <q-icon class=\"q-uploader__file-status\" \r\n                                                :name=\"file.type.indexOf('video/') === 0 ? 'movie': \r\n                                                (file.type.indexOf('image/') === 0 ? 'photo' :\r\n                                                (file.type.indexOf('audio/') === 0 ? 'audiotrack' : 'insert_drive_file'))\" ></q-icon>\r\n                                            <div class=\"q-uploader__file-header-content col\">\r\n                                            <div class=\"q-uploader__title\">{{file.name}}</div>\r\n                                            </div>\r\n                                            <q-circular-progress v-if=\"file.__status === 'uploading'\" :value=\"file.__progress\" :min=\"0\" :max=\"1\" :indeterminate=\"file.__progress === 0\"></q-circular-progress>\r\n                                            <q-btn v-if=\"file.__status === 'failed'\" round dense flat :icon=\"$q.iconSet.uploader['clear']\"  @click=\"slotProps.removeFile(file)\"></q-btn>\r\n                                        </div>\r\n                                    </div>\r\n                                </template>\r\n                            </template>\r\n                            <div v-for=\"file in files\" :key= \"file.name\" class=\"q-uploader__file relative-position q-uploader__file--uploaded\" >\r\n                                <div class=\"q-uploader__file-header row flex-center no-wrap\">\r\n                                    <q-icon class=\"q-uploader__file-status\" \r\n                                        :name=\"file.type.indexOf('video/') === 0 ? 'movie': \r\n                                        (file.type.indexOf('image/') === 0 ? 'photo' :\r\n                                        (file.type.indexOf('audio/') === 0 ? 'audiotrack' : 'insert_drive_file'))\" ></q-icon>\r\n                                    <div class=\"q-uploader__file-header-content col\">\r\n                                    <div class=\"q-uploader__title\">{{file.name}}</div>\r\n                                    </div>\r\n                                    <q-btn v-if=\"!$props.readonly\" round dense flat icon=\"delete\" @click=\"removeRemoteFile(file)\"></q-btn>                      \r\n                                    <q-btn round dense flat icon=\"file_download\"  @click=\"$emit('download-file', file.fileUri)\" ></q-btn>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        </template> \r\n                    </q-field>\r\n                    <div class=\"q-field__after q-field__marginal row no-wrap items-center\" v-if=\"$props.simple && !$props.readonly\">\r\n                            <q-spinner v-if=\"slotProps.isUploading\" class=\"q-uploader__spinner\"></q-spinner> \r\n                            <q-btn v-if=\"globalCanAddFiles(slotProps.files)\" type=\"a\" :icon=\"$q.iconSet.uploader.add\" flat dense>\r\n                                <q-uploader-add-trigger></q-uploader-add-trigger>\r\n                            </q-btn>\r\n                            <q-btn v-if=\"slotProps.isUploading\" type=\"a\" :icon=\"$q.iconSet.uploader.clear\" flat dense \r\n                                @click=\"slotProps.abort\">\r\n                                <q-tooltip>{{$q.lang.vui.uploader.clear}}</q-tooltip>\r\n                            </q-btn>\r\n                    </div>\r\n                 </div>\r\n            </template>   \r\n        </q-uploader>\r\n</template>\r\n<script>\r\n// we import all of `format`\r\nimport { format } from 'quasar'\r\n// destructuring to keep only what is needed\r\nconst { humanStorageSize } = format\r\n\r\nexport default {\r\n  props: {\r\n        readonly: Boolean,\r\n        label: String,\r\n        simple : {type: Boolean, default: false},\r\n        fileInfoUris: Array,\r\n        fieldName: String,\r\n        url : String,\r\n        downloadUrl : { type : String, default : (props) => props.baseUrl + '/download'},\r\n        multiple: { type : Boolean, default : true  }\r\n  },\r\n  emits: [\"update:file-info-uris\", \"download-file\"],\r\n  computed: {\r\n      \r\n  },\r\n  mounted() {\r\n      this.changeIcon();\r\n      var xhrParams = new URLSearchParams()\r\n      this.fileInfoUris.forEach((fileInfoUri) => {\r\n          xhrParams.append(this.fieldName, fileInfoUri);\r\n      });\r\n\r\n      this.$http.get(this.url + '/fileInfos', { params: xhrParams, credentials: false })\r\n            .then(function (response) { //Ok\r\n                    var uiFileInfos = response.data;\r\n\r\n                    this.files = uiFileInfos.map((uiFileInfo) => {\r\n                        return uiFileInfo;\r\n                    })\r\n                }.bind(this))\r\n            .catch(function (error) { //Ko\r\n                    if(error.response) {\r\n                        this.$q.notify(error.response.status + \":\" + error.response.statusText + \" Can't load file \"+xhrParams);\r\n                    } else {\r\n                        this.$q.notify(error + \" Can't load file \"+xhrParams);\r\n                    }\r\n                }.bind(this)\r\n        );\r\n  },\r\n  data : function() {\r\n      return {\r\n          files:[],\r\n      }\r\n  },\r\n  methods: {\r\n    uploadedFiles(uploadInfo) {\r\n        var newFileInforUris = [...this.fileInfoUris];\r\n        uploadInfo.files.forEach(function (file) {\r\n            this.files.push(file);\r\n            file.fileUri = file.xhr.response;\r\n            newFileInforUris.push(file.fileUri)\r\n            this.$refs.quasarUploader.removeFile(file)\r\n            this.$emit('update:file-info-uris', newFileInforUris);\r\n        }.bind(this));\r\n    },\r\n    start(a,b,c){\r\n        this.$refs.quasarUploader;\r\n    },\r\n    removeRemoteFile(removedFile) {\r\n            var indexOfFile = this.files.indexOf(removedFile);\r\n            var newFileInforUris = [...this.fileInfoUris];\r\n            var xhrParams = {};\r\n            xhrParams[this.fieldName] = removedFile.fileUri;\r\n                this.$http.delete(this.url, { params: xhrParams, credentials: false })\r\n                    .then(function (/*response*/) { //Ok\r\n                        if (this.multiple) {\r\n                            this.files.splice(indexOfFile, 1)\r\n                            newFileInforUris.splice(indexOfFile, 1);\r\n                        } else {\r\n                            this.files.splice(0);\r\n                            newFileInforUris.splice(0);\r\n                        }\r\n                        this.$emit('update:file-info-uris', newFileInforUris);\r\n                        //this.uploader_forceComputeUploadedSize(componentId);\r\n                    }.bind(this))\r\n                    .catch(function (error) { //Ko\r\n                        this.$q.notify(error.response.status + \":\" + error.response.statusText + \" Can't remove temporary file\");\r\n                    }.bind(this));\r\n            \r\n    },\r\n    globalCanAddFiles(quasarFiles) {\r\n        if (this.multiple) {\r\n            return !this.$props.readonly\r\n        } else {\r\n            return !this.$props.readonly && \r\n            (quasarFiles.filter( file => file.__status != \"uploaded\").length //client-side\r\n            + this.fileInfoUris.length) // server-side\r\n            < 1\r\n        }\r\n    }, \r\n    changeIcon () {\r\n        this.$q.iconSet.uploader.removeUploaded = 'delete_sweep'\r\n        this.$q.iconSet.uploader.done = 'delete'\r\n    },\r\n    addFiles(files) {\r\n        var quasarUploader = this.$refs.quasarUploader;\r\n        if(this.globalCanAddFiles(quasarUploader.files)) {\r\n         this.$refs.quasarUploader.addFiles(files);\r\n        }\r\n    },\r\n    getGlobalSize(quasarFiles) {\r\n        var quasarFileSize = quasarFiles\r\n        .filter( file => file.__status != \"uploaded\")\r\n        .reduce( (totalSize, file) => {\r\n            return totalSize + file.size;\r\n        },0 )\r\n\r\n        var remoteFilesSize = this.files.reduce( (totalSize, file) => {\r\n            return totalSize + file.size;\r\n        },0 )\r\n        return humanStorageSize(quasarFileSize + remoteFilesSize);\r\n\r\n    }\r\n  }\r\n}\r\n</script>","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","import {hsl as colorHsl} from \"d3-color\";\nimport color, {hue} from \"./color.js\";\n\nfunction hsl(hue) {\n  return function(start, end) {\n    var h = hue((start = colorHsl(start)).h, (end = colorHsl(end)).h),\n        s = color(start.s, end.s),\n        l = color(start.l, end.l),\n        opacity = color(start.opacity, end.opacity);\n    return function(t) {\n      start.h = h(t);\n      start.s = s(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n}\n\nexport default hsl(hue);\nexport var hslLong = hsl(color);\n","import {color} from \"d3-color\"\r\nimport {interpolateHsl, interpolateRgb} from \"d3-interpolate\"\r\nlet d3 = {color, interpolateHsl, interpolateRgb}\r\n\r\nexport function getColors(colorName, nbSeries, opacity) {\r\n\tif (\"DEFAULT\" == colorName) {\r\n\t\t//default on ne fait rien\r\n\t\treturn;\r\n\t} \r\n\tvar mainColors\r\n\tvar interpolation = _interpolateHsl; //par défaut interpolation HSL\r\n\tif (\"RAINBOW\" == colorName || \"iRAINBOW\" == colorName) {\r\n\t\t\tmainColors = [ \"#FF0000\", \"#FFA500\", \"#FFFF00\", \"#00FF00\", \"#00FF00\", \"rgb(75, 0, 130)\", \"rgb(238, 130, 238)\" ];\r\n\t} else if (\"SPECTRUM\" == colorName || \"iSPECTRUM\" == colorName) {\r\n\t\tmainColors = [ \"rgb(230, 30, 30)\", \"rgb(230, 230, 30)\", \"rgb(30, 230, 30)\", \"rgb(30, 230, 230)\", \"rgb(30, 30, 230)\", \"rgb(230, 30, 230)\", \"rgb(230, 30, 30)\" ];\r\n\t\tinterpolation = _interpolateCatmul;\r\n\t} else if (\"RED2GREEN\" == colorName || \"iRED2GREEN\" == colorName) {\r\n\t\tmainColors = [ \"rgb(255, 51, 51)\", \"rgb(250, 235, 0)\", \"rgb(51, 200, 51)\" ];\r\n\t} else if (\"GREEN2BLUE\" == colorName || \"iGREEN2BLUE\" == colorName) {\r\n\t\tmainColors = [ \"rgb(51, 153, 51)\", \"rgb(51, 153, 200)\", \"rgb(51, 51, 255)\" ];\r\n\t} else if (\"HEAT\" == colorName || \"iHEAT\" == colorName) {\r\n\t\tmainColors = [ \"rgb(255, 51, 51)\", \"rgb(255, 255, 51)\", \"rgb(51, 153, 51)\", \"rgb(51, 153, 255)\" ];\r\n\t} else if (\"GREEN:INTENSITY\" == colorName || \"iGREEN:INTENSITY\" == colorName) {\r\n\t\tmainColors = [ \"rgb(51, 153, 51)\", \"rgb(170, 250, 170)\" ];\r\n\t\tinterpolation = _interpolateLinear;\r\n\t} else if (\"ANDROID\" == colorName || \"iANDROID\" == colorName) {\r\n\t\tmainColors = [ \"#0099CC\", \"#9933CC\", \"#CC0000\", \"#FF8800\", \"#669900\"  ];\r\n\t\t//mainColors = [ \"#33B5E5\", \"#AA66CC\", \"#ff4444\", \"#ffbb33\", \"#99cc00\" ];\r\n\t} else if (\"ANDROID:LIGHT\" == colorName || \"iANDROID:LIGHT\" == colorName) {\r\n\t\tmainColors = [ \"#33B5E5\", \"#AA66CC\", \"#ff4444\", \"#ffbb33\", \"#99cc00\" ];\r\n\t}  \r\n\tif(colorName.charAt(0) == 'i') { \r\n\t\tmainColors = mainColors.reverse(); \r\n\t}\r\n\tvar resultColors;\r\n\tvar isCycle = mainColors[0] == mainColors[mainColors.length-1];\r\n\tvar resultColors = interpolation(mainColors, nbSeries + (isCycle ? 1 : 0)); //si les couleurs représente un cycle, on exclue la derniére couleur (qui est aussi la premiére)\r\n\t\r\n\tif (opacity) {\r\n\t\t// use the alpha\r\n\t\treturn resultColors.map(function( val, i ) {\r\n\t\t\tvar d3Color = d3.color(val);\r\n\t\t\td3Color.opacity = opacity;\r\n\t\t\treturn d3Color.formatRgb();\r\n\t\t});\r\n\t}\r\n\treturn resultColors;\r\n};\r\n\r\nfunction _interpolateHsl(mainColors, nbColors) {\r\n\treturn _point2PointColors(mainColors, nbColors, function(t, c1, c2, c3, c4) {\r\n\t\treturn d3.interpolateHsl(c2, c3)(t);\r\n\t}); \r\n};\r\n\r\nfunction _interpolateLinear(mainColors, nbColors) {\r\n\treturn _point2PointColors(mainColors, nbColors, function(t, c1, c2, c3, c4) {\r\n\t\treturn d3.interpolateRgb(c2, c3)(t);\r\n\t});\r\n};\r\n\r\nfunction _interpolateCatmul(mainColors, nbColors) {\r\n\treturn _point2PointColors(mainColors, nbColors, function(t, c1, c2, c3, c4) {\r\n\t\tvar empty = {r:null,g : null,b : null };\r\n\t\t\r\n\t\tvar nc1 = c1 ? d3.rgb(c1) : empty;\r\n\t\tvar nc2 = d3.rgb(c2);\r\n\t\tvar nc3 = d3.rgb(c3);\r\n\t\tvar nc4 = c4 ? d3.rgb(c4) : empty;\r\n\t\tvar red = ( Math.max(Math.min(Math.round(_catmull(t, nc1.r, nc2.r, nc3.r, nc4.r)), 255), 0));\r\n\t\tvar green = ( Math.max(Math.min(Math.round(_catmull(t, nc1.g, nc2.g, nc3.g, nc4.g)), 255), 0));\r\n\t\tvar blue = (Math.max(Math.min(Math.round(_catmull(t, nc1.b, nc2.b, nc3.b, nc4.b)), 255), 0));\r\n\t\treturn d3.rgb(red,green,blue);\r\n\t});\r\n};\r\n\r\nfunction  _point2PointColors(mainColors, nbColors, colorInterpolation) {\r\n\tif(nbColors == 1) {\r\n\t\treturn [mainColors[0]];\r\n\t}\r\n\tvar startJ = 0;\r\n\tvar interpolatedColor = new Array();\r\n\tvar nbInterpolatedColor = mainColors.length;\r\n\tvar nbInterpolatedColorDegree = 0;\r\n\twhile ((nbInterpolatedColor - 1) % (nbColors - 1) != 0 && nbInterpolatedColorDegree < 20) {\r\n\t\tnbInterpolatedColorDegree++;\r\n\t\tnbInterpolatedColor = mainColors.length + nbInterpolatedColorDegree * (mainColors.length - 1);\r\n\t}\r\n\tnbInterpolatedColorDegree++;\r\n\tfor (var i = 0; i < mainColors.length - 1; i++) {\r\n\t\tvar c1 = i - 1 >= 0 ? mainColors[i - 1] : null;\r\n\t\tvar c2 = mainColors[i];\r\n\t\tvar c3 = mainColors[i + 1];\r\n\t\tvar c4 = i + 2 < mainColors.length ? mainColors[i + 2] : null;\r\n\t\tfor (var j = startJ; j < nbInterpolatedColorDegree + 1; j++) {\r\n\t\t\tvar color = colorInterpolation(j / nbInterpolatedColorDegree, c1, c2, c3, c4);\r\n\t\t\tinterpolatedColor.push(color);\r\n\t\t}\r\n\t\tstartJ = 1; //on ne refait pas le premier point (dejé atteint)\r\n\t}\r\n\tvar result = new Array();\r\n\tfor (var i = 0; i < nbColors; i++) {\r\n\t\tvar index = (interpolatedColor.length - 1) / (nbColors - 1) * i;\r\n\t\t//var index = i % (interpolatedColor.length - 1);\r\n\t\tresult.push(interpolatedColor[index]);\r\n\t}\r\n\treturn result;\r\n};\r\n\r\n//Catmull-Rom spline interpolation function\r\n//p0 et p3 servent a orienter le chemin entre p1 et p2\r\n//t est une fraction entre \r\nfunction _catmull (t, inP0, p1, p2, inP3) {\r\n\t\tvar delta = p2 - p1;\r\n\t\tvar p0 = inP0 != null ? inP0 : p1 - delta;\r\n\t\tvar p3 = inP3 != null ? inP3 : p2 + delta;\r\n\treturn 0.5 * (2 * p1 + (-p0 + p2) * t + (2 * p0 - 5 * p1 + 4 * p2 - p3) * t * t + (-p0 + 3 * p1 - 3 * p2 + p3) * t * t * t);\r\n}","<template>\r\n    <canvas ref=\"graphCanvas\"></canvas>\r\n</template>\r\n<script>\r\nimport {getColors} from './dashboard-tools'\r\n\r\nexport default {\r\n\tprops : {\r\n        title:                          { type: String,  },\r\n\t\ttype:          \t\t\t\t\t{ type: String,  required: true },\r\n\t\tdatas:                          { type: Array,   },\r\n\t\tdataSeriesTranslator:           { type: Function,},\r\n\t\tqueryUrl:                       { type: String,  },\r\n        queryClusteredMeasure:     \t\t{ type: Object,  },\r\n\t\tqueryMeasures:     \t\t\t\t{ type: Array,   },\r\n\t\tqueryDataFilter:  \t\t\t\t{ type: Object,  },\r\n\t\tqueryTimeFilter:\t\t\t\t{ type: Object,  },\r\n\t\tqueryGroupBy:                   { type: String,  },\r\n        colors: \t\t\t\t\t\t{ type: String,  required: true,   default:'DEFAULT' },\r\n\t\tlabels:                         { type: Object,  required: true },\r\n        minTime:                        { type: String, },\r\n        maxTime:                        { type: String, },\r\n        fillGapDim:                     { type: String, },\r\n        timeFormat:                     { type: String,  required: true,   default:'DD/MM/YYYY HH:mm' },\r\n        additionalOptions: \t\t\t\t{ type: Object, },\r\n\t},\r\n\tcreated : function () {\r\n       this.$data.graphChartId = \"graphChartId_\"+this.hashCode(this.type+'_'+JSON.stringify(this.labels));\r\n       if(!window.dashboardGraphChart) {\r\n           window.dashboardGraphChart = {};\r\n       }     \r\n    },\r\n    mounted: function() {\r\n       if(this.queryUrl) {\r\n           this.fetchData();\r\n       } else {\r\n           this.$data.graphDataSeriesTranslator = this.dataSeriesTranslator?this.dataSeriesTranslator:this.defaultDataSeriesTranslator;\r\n           var translatedData = this.$data.graphDataSeriesTranslator(this.datas);\r\n           this.showChartJsChart(translatedData.dataValues, translatedData.dataMetrics, translatedData.timedSeries, this.queryGroupBy, this.labels, this.colors, this.title, this.additionalOptions);\r\n       }  \r\n    },\r\n\tdata: function () {\r\n\t\treturn {\r\n\t\t\tgraphChartId: {},\r\n            graphDataSeriesTranslator: this.defaultDataSeriesTranslator,\r\n            graphDataSets: []\r\n\t\t}\r\n\t},\r\n\twatch: { \r\n          datas: {\r\n             handler(newValue, oldValue) {\r\n                if(!!this.datas) {\r\n                    var translatedData = this.$data.graphDataSeriesTranslator(newValue);\r\n                    this.showChartJsChart(translatedData.dataValues, translatedData.dataMetrics, translatedData.timedSeries, this.queryGroupBy, this.labels, this.colors, this.title, this.additionalOptions);\r\n                }\r\n            },\r\n            deep: true\r\n          },\r\n          queryTimeFilter: {\r\n             handler(newValue, oldValue) {\r\n                if(!!this.queryUrl && this.hashCode(JSON.stringify(newValue)) !== this.hashCode(JSON.stringify(oldValue))) {\r\n\t\t\t\t    this.fetchData();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdeep: true\r\n          },\r\n          queryDataFilter: {\r\n             handler(newValue, oldValue) {\r\n                if(!!this.queryUrl && this.hashCode(JSON.stringify(newValue)) !== this.hashCode(JSON.stringify(oldValue))) {\r\n                    this.fetchData();\r\n                }\r\n            },\r\n            deep: true\r\n          }\r\n    },\r\n\tmethods: {\r\n        hashCode: function(s) {\r\n            let h;\r\n            for(let i = 0; i < s.length; i++) \r\n                  h = Math.imul(31, h) + s.charCodeAt(i) | 0;\r\n        \r\n            return h;\r\n        },\r\n\t\tfetchData: function() {\r\n\t\t\tvar dataQuery = this.buildQuery();\r\n            this.$http.post(this.queryUrl, dataQuery )\r\n            .then( function (response) { //Ok\r\n                var translatedData = this.$data.graphDataSeriesTranslator(response.data);\r\n                this.showChartJsChart(translatedData.dataValues, translatedData.dataMetrics, translatedData.timedSeries,this.queryGroupBy, this.labels, this.colors, this.title, this.additionalOptions);\r\n            }.bind(this));\r\n        },\r\n\t\tbuildQuery: function() {\r\n\t\t\tvar dataQuery = { dataFilter : this.queryDataFilter, timeFilter : this.queryTimeFilter };\r\n\t\t\tif (this.queryMeasures) {\r\n\t\t\t\tdataQuery['measures'] = this.queryMeasures;\r\n\t\t\t}\r\n\t\t\tif (this.queryClusteredMeasure) {\r\n\t\t\t\tdataQuery['clusteredMeasure'] = this.queryClusteredMeasure;\r\n\t\t\t}\r\n\t\t\tif (this.queryGroupBy) {\r\n\t\t\t\tdataQuery['groupBy'] = this.queryGroupBy;\r\n\t\t\t}\r\n\t\t\treturn dataQuery;\r\n\t\t},\r\n\r\n\t\tshowChartJsChart: function(datas, dataMetrics, timedSeries, queryGroupBy, dataLabels, dataColors, chartTitle, additionalOptions) {\r\n\t\t\tvar xLabels = Object.values(dataLabels);\r\n\t\t\tvar chartOptions;\r\n\t\t\tvar chartJsDataSets;\r\n\t\t\tvar chartJsType;\r\n\t\t\tif ( this.type === \"bubbles\") {\r\n\t\t\t\tchartJsType = 'bubble';\r\n\t\t\t\tvar realLabels = dataLabels.filter(metric => metric !== queryGroupBy);\r\n\t\t\t\txLabels = Object.values(realLabels);\r\n                var bubblesData = this.toChartJsBubblesData(datas, realLabels.keys(), realLabels, queryGroupBy);\r\n\t\t\t\tchartJsDataSets = [ {data: bubblesData }];\r\n\t\t\t\tchartOptions = this.getChartJsBubblesOptions(datas, realLabels.keys(), queryGroupBy, realLabels, chartTitle, additionalOptions);\r\n\t\t\t\tthis.setChartJsColorOptions(chartJsDataSets, dataColors, 0.5);\r\n\t\t\t} else if (this.type ===\"linechart\") {\r\n\t\t\t\tchartJsType = 'line';\r\n\t\t\t\tchartJsDataSets = this.toChartJsData(datas, dataLabels, timedSeries, queryGroupBy);\r\n\t\t\t\tchartOptions = this.getChartJsLineOptions(datas, queryGroupBy, dataLabels, timedSeries, chartTitle, additionalOptions);\r\n\t\t\t\tthis.setChartJsColorOptions(chartJsDataSets, dataColors);\r\n\t\t\t} else if (this.type ===\"stakedbarchart\") {\r\n\t\t\t\tchartJsType = 'bar';\r\n\t\t\t\tchartJsDataSets = this.toChartJsData(datas, dataLabels, timedSeries, queryGroupBy);\r\n\t\t\t\tchartOptions = this.getStackedOptions(datas, queryGroupBy, dataLabels, timedSeries, chartTitle, additionalOptions);\r\n\t\t\t\tthis.setChartJsColorOptions(chartJsDataSets, dataColors);\r\n\t\t\t} else if (this.type ===\"polararea\") {\r\n\t\t\t\tchartJsType = 'polarArea';\r\n\t\t\t\tchartJsDataSets = this.toChartJsData(datas, dataLabels, timedSeries, queryGroupBy);\r\n\t\t\t\tvar pieData  = this.toChartJsPieData(chartJsDataSets, dataLabels);\r\n\t\t\t\tchartJsDataSets = pieData.datasets;\r\n\t\t\t\txLabels = pieData.labels;\r\n\t\t\t\tchartOptions = this.getPolarChartOptions(datas, queryGroupBy, dataLabels, timedSeries, chartTitle, additionalOptions);\r\n\t\t\t\tthis.setChartJsPieColorOptions(chartJsDataSets, dataColors);\r\n\t\t\t} else if (this.type ===\"doughnut\") {\r\n\t\t\t\tchartJsType = 'doughnut';\r\n\t\t\t\tvar realLabels = dataLabels.filter(metric => metric !== queryGroupBy);\r\n\t\t\t\tchartJsDataSets = this.toChartJsData(datas, realLabels, timedSeries, queryGroupBy);\r\n\t\t\t\tvar pieData  = this.toChartJsPieData(chartJsDataSets, dataLabels);\r\n\t\t\t\tchartJsDataSets = pieData.datasets;\r\n\t\t\t\txLabels = pieData.labels;\r\n\t\t\t\tthis.setChartJsPieColorOptions(chartJsDataSets, dataColors);\r\n\t\t\t\tchartOptions = {\r\n\t\t\t\t\tlegend : {\r\n\t\t\t\t\t\tdisplay: true,\r\n\t\t\t\t\t\tposition: 'bottom'\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t//\r\n\t\t\tvar ctx = this.$.refs.graphCanvas;\r\n\t\t\tvar finalOptions = this.mergeDeep(chartOptions,additionalOptions);\r\n\t\t\tif(!window.dashboardGraphChart[this.$data.graphChartId]) {\r\n    \t\t\tlet chartData = {\r\n                    datasets: chartJsDataSets\r\n                };\r\n                if(!timedSeries) {\r\n                    chartData.labels = xLabels;\r\n                }\r\n    \t\t\tvar graphChart = new Chart(ctx,{\r\n    \t\t\t\ttype: chartJsType,\r\n    \t\t\t\tdata: chartData,\r\n    \t\t\t\toptions: finalOptions\r\n    \t\t\t});\r\n    \t\t\twindow.dashboardGraphChart[this.$data.graphChartId] = graphChart;\r\n\t\t\t} else {\r\n                var graphChart =  window.dashboardGraphChart[this.$data.graphChartId];\r\n                graphChart.data.datasets = chartJsDataSets;\r\n\t\t\t    if(this.hashCode(JSON.stringify(graphChart.options.scales)) !== this.hashCode(JSON.stringify(finalOptions.scales))) {\r\n                    graphChart.options.scales = finalOptions.scales;\r\n                }\r\n                graphChart.update(\"none\");\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetChartJsColorOptions: function(datasets, dataColors, opacity) {\r\n\t\t\tif(dataColors) {\r\n\t\t\t\tvar myColors = getColors(dataColors, datasets.length, opacity);\r\n\t\t\t\tvar myBgColors = getColors(dataColors, datasets.length, opacity?opacity*0.25:0.25);\r\n                for(var i = 0 ; i<datasets.length; i++) {\r\n\t\t\t\t\tdatasets[i].borderColor = myColors[i];\r\n                    datasets[i].backgroundColor = myBgColors[i];\r\n                    datasets[i].pointBackgroundColor = myColors[i];\r\n                    datasets[i].pointBorderColor = '#FFFFFFAF';\r\n                    datasets[i].pointBorderWidth = 2;\r\n\t\t\t\t\tdatasets[i].fill = true;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t setChartJsPieColorOptions: function(datasets, dataColors, opacity) {\r\n\t\t\tif(dataColors) {\r\n\t\t\t\tfor(var i = 0 ; i<datasets.length; i++) {\r\n\t\t\t\t\tdatasets[i].backgroundColor = getColors(dataColors, datasets[i].data.length, opacity);//we have one dataset\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\t getChartJsBubblesOptions: function(datas, dataMetrics, queryGroupBy, dataLabels, chartTitle, additionalOptions){\r\n\t\t\tvar maxRadius = this.getMaxRadius(datas, dataMetrics[2]); //always the third columns\r\n\t\t\tvar xAxisType = this.getAxisType(datas, additionalOptions, 'xAxisType', dataMetrics[0]);\r\n\t\t\tvar yAxisType = this.getAxisType(datas, additionalOptions, 'yAxisType', dataMetrics[1]);\r\n\t\t\treturn {\r\n\t\t\t\t\tscales: {\r\n\t\t\t\t\t\tx: {\r\n\t\t\t\t\t\t\ttype: xAxisType\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\ty: {\r\n\t\t\t\t\t\t\ttype: yAxisType\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\telements: {\r\n\t\t\t\t\t\tpoint: {\r\n\t\t\t\t\t\tradius: function(context) {\r\n\t\t\t\t\t\t\tvar index = context.dataIndex;\r\n\t\t\t\t\t\t\tvar data = context.dataset.data[index];\r\n\t\t\t\t\t\t\tvar size = context.chart.width;\r\n\t\t\t\t\t\t\tvar base = data.r_measure / maxRadius; \r\n\t\t\t\t\t\t\treturn (size / 24) * base;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tlegend: {\r\n\t\t\t\t\t\tdisplay: false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tplugins: {\r\n\t\t\t\t\t\ttooltip: {\r\n\t\t\t\t\t\t\tdisplayColors: false,\r\n\t\t\t\t\t\t\tcallbacks: {\r\n\t\t\t\t\t\t\t\ttitle: function(graphs) {\r\n\t\t\t\t\t\t\t\t\tvar graph = graphs[0]\r\n\t\t\t\t\t\t\t\t\t//we have on serie so we keep only the first one\r\n\t\t\t\t\t\t\t\t\treturn graph.dataset.data[graph.dataIndex].name;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tlabel: function(graph) {\r\n\t\t\t\t\t\t\t\t\tvar point = graph.dataset.data[graph.dataIndex];\r\n\t\t\t\t\t\t\t\t\treturn [\r\n\t\t\t\t\t\t\t\t\t\tdataLabels[dataMetrics[0]] +\" : \"+ Math.round(point.x),\r\n\t\t\t\t\t\t\t\t\t\tdataLabels[dataMetrics[1]] +\" : \"+ Math.round(point.y),\r\n\t\t\t\t\t\t\t\t\t\tdataLabels[dataMetrics[2]] +\" : \"+ Math.round(point.r_measure),\r\n\t\t\t\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tgetPolarChartOptions: function(datas, queryGroupBy, dataLabels, chartTitle, additionalOptions){\r\n\t\t\treturn {};\r\n\t\t},\r\n\r\n\t\t getAxisType: function(datas, additionalOptions, optionKey, metric) {\r\n\t\t\tvar axisType = 'linear';//linear by default\r\n\t\t\tif (additionalOptions) {\r\n\t\t\t\tif (additionalOptions[optionKey]) {\r\n\t\t\t\t\tif(additionalOptions[optionKey] === 'auto') {\r\n\t\t\t\t\t\tvar minMax = getMinMax(datas,metric)//the x axis\r\n\t\t\t\t\t\tif (minMax.max > 0 &&  minMax.min/minMax.max < 0.001){\r\n\t\t\t\t\t\t\taxisType = 'logarithmic';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\taxisType = additionalOptions[optionKey];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\treturn axisType\r\n\t\t},\r\n\t\tgetChartJsLineOptions: function(datas, queryGroupBy, dataLabels, timedSeries, chartTitle, additionalOptions){\r\n\t\t\tvar options =  {\r\n\t\t\t\tscales : {\r\n                    y : {\r\n\t\t\t\t\t\tticks : {\r\n\t\t\t\t\t\t\tbeginAtZero: true,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuggestedMin: 0, \r\n\t\t\t\t\t\tsuggestedMax: 10\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tplugins: {\r\n                    title: {\r\n                        display: !!chartTitle,\r\n                        text: chartTitle?chartTitle:'',\r\n                        align:'start',\r\n                        padding:20,\r\n                        font: {size: 14, weight:'bold'}\r\n                    },\r\n                    legend: {\r\n                        position: 'bottom'                           \r\n                    },\r\n\t\t\t\t\ttooltip: {\r\n\t\t\t\t\t\tmode: 'index',\r\n\t\t\t\t\t\tposition: 'nearest',\r\n\t\t\t\t\t\tboxPadding:3, \r\n\t\t\t\t\t\tbackgroundColor:'#F8F8F8D0', \r\n\t\t\t\t\t\ttitleColor:'#000', \r\n\t\t\t\t\t\tbodyColor:'#000', \r\n\t\t\t\t\t\tborderColor:'#333', \r\n\t\t\t\t\t\tborderWidth:1,\r\n\t\t\t\t\t\t/*callbacks: {\r\n\t\t\t\t\t\t\tlabel: function(graph) {\r\n\t\t\t\t\t\t\t\tvar point = graph.dataset.data[graph.dataIndex];\r\n\t\t\t\t\t\t\t\treturn graph.dataset.label +\" : \"+ Math.floor(point.y);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\ttitle: function(graphs) {\r\n\t\t\t\t\t\t\t\treturn timeFormatter;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}*/\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\telements : {\r\n\t\t\t\t\tpoint : {\r\n\t\t\t\t\t\tradius : 3,\r\n\t\t\t\t\t\thoverRadius : 6\r\n\t\t\t\t\t},\r\n\t\t\t\t\tline : {\r\n\t\t\t\t\t\ttension: 0\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tif (timedSeries) {\r\n\t\t\t\toptions.scales.x = {\r\n                    type: 'time',\r\n\t\t\t\t\tticks: {\r\n                        source:'auto', \r\n                        major: {\r\n                            enabled: true\r\n                        }\r\n                    },\r\n                    time: {\r\n                      displayFormats: {\r\n                        hour: 'HH:mm',\r\n                        minute: 'HH:mm'\r\n                      }, \r\n                      tooltipFormat: this.timeFormat+' Z'\r\n                    }\r\n\t\t\t\t}\t\t\t\t\r\n                if(this.minTime) {\r\n                    options.scales.x.suggestedMin= dayjs(this.minTime, this.timeFormat).valueOf();\r\n                }\r\n                if(this.maxTime) {\r\n                    options.scales.x.suggestedMax= dayjs(this.maxTime, this.timeFormat).valueOf();\r\n                }\r\n\t\t\t} else {\r\n\t\t\t\toptions.scales.x = {\r\n\t\t\t\t\ttype: 'category'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn options;\r\n\t\t},\r\n\r\n\r\n\t\t getStackedOptions: function(datas, queryGroupBy, dataLabels, timedSeries, chartTitle, additionalOptions){\r\n\t\t\tvar options = this.getChartJsLineOptions(datas, dataQuery, dataLabels, timedSeries, additionalOptions)\r\n\t\t\toptions.scales.x.stacked = true;\r\n\t\t\toptions.scales.y.stacked = true;\r\n\t\t\treturn options;\r\n\t\t},\r\n\r\n\r\n\t\t toChartJsBubblesData: function(data, dataMeasures, dataLabels, groupBy) {\r\n\t\t\tvar newSeries = new Array();\r\n\t\t\tfor(var i = 0 ; i< data.length; i++) {\r\n\t\t\t\tvar serie = new Object();\r\n\t\t\t\tserie.x = data[i].values[dataMeasures[0]];\r\n\t\t\t\tserie.y = data[i].values[dataMeasures[1]];\r\n\t\t\t\tvar r = data[i].values[dataMeasures[2]];\r\n\t\t\t\tif (!this.isEmpty(data[i].values) && !r) {\r\n\t\t\t\t\tr = 0;\r\n\t\t\t\t}\r\n\t\t\t\tserie.name = data[i].values[groupBy]\r\n\t\t\t\tserie.r_measure = r;\r\n\t\t\t\tnewSeries.push(serie);\r\n\t\t\t}\r\n\t\t\treturn newSeries;\r\n\t\t},\r\n\r\n\r\n\t\t getMaxRadius: function(datas, radiusField) {\r\n\t\t\tvar maxRadius = 0 ;\r\n\t\t\tfor(var i = 0 ; i< datas.length; i++) {\r\n\t\t\t\tvar r = datas[i].values[radiusField];\r\n\t\t\t\tif (r > maxRadius) {\r\n\t\t\t\t\tmaxRadius = r;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn Math.max(maxRadius, 1);\r\n\t\t},\r\n\r\n\t\tgetMinMax: function(datas, field) {\r\n\t\t\tvar min= 0;\r\n\t\t\tvar max= 0;\r\n\t\t\tfor(var i = 0 ; i< datas.length; i++) {\r\n\t\t\t\tvar value = datas[i].values[field];\r\n\t\t\t\tif (value > max) {\r\n\t\t\t\t\tmax = value;\r\n\t\t\t\t}\r\n\t\t\t\tif (value < min) {\r\n\t\t\t\t\tmin = value\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tmin: min,\r\n\t\t\t\tmax: max\r\n\t\t\t}\r\n\t\t},\r\n        defaultDataSeriesTranslator: function(datas) {\r\n            var dataValues = datas.timedDataSeries ? datas.timedDataSeries : datas.tabularDataSeries;\r\n            var dataMetrics = datas.seriesNames;\r\n            return {dataValues: dataValues, dataMetrics:dataMetrics, timedSeries:!!datas.timedDataSeries};\r\n        },\r\n\t\t/** Conversion de données servers List<Instant, Map<NomMetric, value>> en données Chartjs.*/\r\n\t\ttoChartJsData: function(datas, dataLabels, timedSeries, xAxisMeasure) {\r\n\t\t\tlet _endsWith = function(string, suffix) {\r\n\t\t\t\treturn string.indexOf(suffix, string.length - suffix.length) !== -1;\r\n\t\t\t};\r\n\t\t\t//var categorieIndex = new Array();\r\n\t\t\t\r\n\t\t\tvar newSeries = new Array();\r\n\t\t\tfor(const metric in dataLabels) {\r\n\t\t\t\tvar serie = new Object();\r\n\t\t\t\tserie.data = new Array();\r\n                serie.parsing = false;\r\n\t\t\t\tif(dataLabels && dataLabels[metric]) {\r\n\t\t\t\t\tserie.label = dataLabels[metric];\r\n\t\t\t\t}\r\n\t\t\t\tvar lastTime;\r\n                var stepSize = this.timeDimToSecondsStep()*1000;\r\n\t\t\t\tfor(var j = 0 ; j<datas.length; j++) {\r\n                    if(timedSeries && !!this.fillGapDim) {\r\n                        var dataTime = Date.parse(datas[j].time);\r\n                        while(dataTime >= lastTime+2*stepSize) {\r\n                            serie.data.push({x: lastTime+stepSize,y: null});\r\n                            lastTime = lastTime+stepSize;\r\n                        }\r\n                    }\r\n\t\t\t\t\tvar x = timedSeries ? Date.parse(datas[j].time) : datas[j].values[xAxisMeasure]; // timed series by default, else categories \r\n\t\t\t\t\tvar y = datas[j].values[metric];\r\n\t\t\t\t\tif (!this.isEmpty(datas[j].values) && !y) {\r\n\t\t\t\t\t\ty = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tserie.data.push({ x: x, y: y });\r\n\t\t\t\t\tlastTime = x;\r\n\t\t\t\t}\r\n\t\t\t\tif(!serie.label) {\r\n\t\t\t\t\tif(_endsWith(metric, 'count')) {\r\n\t\t\t\t\t\tserie.label = \"Quantité\";\r\n\t\t\t\t\t} else if(_endsWith(metric, 'mean')) {\r\n\t\t\t\t\t\tserie.label = \"Moyenne\";\r\n\t\t\t\t\t} else if(_endsWith(metric, 'min')) {\r\n\t\t\t\t\t\tserie.label = \"Minimum\";\r\n\t\t\t\t\t} else if(_endsWith(metric, 'max')) {\r\n\t\t\t\t\t\tserie.label = \"Maximum\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t\tnewSeries.push(serie);\r\n\t\t\t}\r\n\t\t\treturn newSeries;\r\n\t\t},\r\n\r\n\t\ttoChartJsPieData: function(chartJsDataSets, dataLabels) {\r\n\t\t\tvar newSeries = new Array();\r\n\t\t\tvar labels = new Array();\r\n\t\t\tfor(var i = 0 ; i< chartJsDataSets[0].data.length; i++) {\r\n\t\t\t\tvar serie = new Object();\r\n\t\t\t\tvar label = chartJsDataSets[0].data[i].x;\r\n\t\t\t\tif(dataLabels && dataLabels[chartJsDataSets[0].data[i].x]) {\r\n\t\t\t\t\tlabel = dataLabels[chartJsDataSets[0].data[i].x];\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tlabels.push(label);\r\n\t\t\t\tnewSeries.push(chartJsDataSets[0].data[i].y);\r\n\t\t\t}\r\n\t\t\treturn { \r\n\t\t\t\tdatasets : [{ data : newSeries }],\r\n\t\t\t\tlabels : labels\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\ttimeDimToSecondsStep : function() {\r\n            let dateTimeDim = this.fillGapDim;\r\n            if(dateTimeDim === '1h') {\r\n                return 60*60;\r\n            } else if(dateTimeDim === '1d') {\r\n                return 24*60*60;\r\n            } else if(dateTimeDim === '1w') {\r\n                return 7*24*60*60;\r\n            } else if(dateTimeDim === '1M') {\r\n                return 30*24*60*60;\r\n            } else {\r\n                return 30*24*60*60;\r\n            }\r\n        },\r\n\t\tisEmpty: function(obj) {\r\n\t\t\treturn Object.keys(obj).length === 0;\r\n\t\t},\r\n\t\tisObject: function(item) {\r\n          return (item && typeof item === 'object' && !Array.isArray(item));\r\n        },\r\n        mergeDeep: function(target, ...sources) {\r\n          if (!sources.length) return target;\r\n          const source = sources.shift();\r\n        \r\n          if (this.isObject(target) && this.isObject(source)) {\r\n            for (const key in source) {\r\n              if (this.isObject(source[key])) {\r\n                if (!target[key]) Object.assign(target, { [key]: {} });\r\n                this.mergeDeep(target[key], source[key]);\r\n              } else {\r\n                Object.assign(target, { [key]: source[key] });\r\n              }\r\n            }\r\n          }\r\n          return this.mergeDeep(target, ...sources);\r\n        }\r\n\t}\r\n}\r\n</script>","export default {\r\n    mounted: function (el, binding, vnode) {\r\n        var watchKeys = binding.value;\r\n        if (!window.watcherUpdates) {\r\n            //Some init must be only once\r\n            window.watcherUpdates = {\r\n                originalDocumentTitle: document.title,\r\n                updates_detected: false,\r\n                acceptedUpdates: function () {\r\n                    window.watcherUpdates.updates_detected = false;\r\n                    document.title = window.watcherUpdates.originalDocumentTitle;\r\n                },\r\n                beforeWindowUnload: function (e) {\r\n                    //les navigateurs n'affichent pas le message proposé pour éviter le scam, il suffit de retourner une chaine non vide\r\n                    if (window.watcherUpdates.updates_detected) {\r\n                        // Cancel the event\r\n                        e.preventDefault()\r\n                        // Chrome requires returnValue to be set\r\n                        e.returnValue = 'Voulez-vous quitter cette page ? \\n Les modifications que vous avez apportées ne seront peut-être pas enregistrées'\r\n                    }\r\n                },\r\n            };\r\n            window.addEventListener('beforeunload', window.watcherUpdates.beforeWindowUnload);\r\n            if (binding.instance.$root.uiMessageStack) {                \r\n                var uiMessageStack = binding.instance.$root.uiMessageStack;\r\n                var hasError = uiMessageStack.globalErrors.length > 0;\r\n                for (let watchKey of watchKeys.split(\",\")) {\r\n                    hasError = hasError || uiMessageStack.objectFieldErrors[watchKey];\r\n                    if (hasError) {\r\n                        break;\r\n                    }\r\n                }\r\n                if (hasError) {\r\n                    window.watcherUpdates.updates_detected = true;//if there is other errors => mark as dirty\r\n                }\r\n            }\r\n        }\r\n        //each button eventListener click\r\n        el.addEventListener('click', window.watcherUpdates.acceptedUpdates);\r\n\r\n        //each button watch data (watchKey may differ)\r\n        for (let watchKey of watchKeys.split(\",\")) {\r\n            binding.instance.$root.$watch('vueData.' + watchKey, function () {\r\n                window.watcherUpdates.updates_detected = true;\r\n                document.title = '*' + window.watcherUpdates.originalDocumentTitle;\r\n            }, { deep: true });\r\n        }\r\n    },\r\n    unmounted: function () {\r\n        window.removeEventListener('beforeunload', window.watcherUpdates.beforeWindowUnload)\r\n    }\r\n}","export default {\r\n    mounted: function(el, binding, vnode) {\r\n        var doFocus = binding.value;\r\n        if(doFocus && !window.autofocus) {\r\n             window.autofocus = true;\r\n             el.focus();\r\n        }\r\n     }\r\n}","import { nextTick } from 'vue'\r\n\r\nexport default {\r\n     updated: function (el, binding, vnode) {\r\n          nextTick(() => {\r\n               if (!window.watcherUpdates || !window.watcherUpdates.updates_detected) {\r\n                    el.classList.add('hidden')\r\n               } else {\r\n                    el.classList.remove('hidden')\r\n               }\r\n          })\r\n     }\r\n}","import * as Vue from \"vue\"\r\nimport * as Quasar from \"quasar\"\r\n\r\nexport default {\r\n    created: function(elMaxi, binding) {\r\n            const topOffset = binding.value?binding.value.topOffset:null;\r\n            const topOffsetElSelector = binding.value?binding.value.topOffsetEl:null;\r\n            const leftOffset = binding.value?binding.value.leftOffset:null;\r\n            const leftOffsetElSelector = binding.value?binding.value.leftOffsetEl:null;\r\n            const elMini = elMaxi.querySelector('.mini')\r\n            for(var i=0 ; i<elMaxi.childNodes.length; i++) {\r\n                var elChild = elMaxi.childNodes[i];\r\n                if(elChild.classList && !elChild.classList.contains('mini')) {\r\n                    elChild.classList.add(\"not-mini\")\r\n                }\r\n            }\r\n            \r\n            Vue.minifyHandler = function() {\r\n                var scrollContainer = elMaxi.closest('.q-page-container'); \r\n                var currentYScroll = scrollContainer?-scrollContainer.getBoundingClientRect().y:window.pageYOffset;\r\n                var currentXScroll = scrollContainer?-scrollContainer.getBoundingClientRect().x:window.pageXOffset;\r\n                var currentTopOffset = elMaxi.getBoundingClientRect().y+currentYScroll;\r\n                var currentLeftOffset = elMaxi.getBoundingClientRect().x+currentXScroll;\r\n                if(topOffset || topOffsetElSelector) {\r\n                    currentTopOffset = Vue.minifyComputeOffset(topOffset, topOffsetElSelector, 0, 'TOP');\r\n                }\r\n                if(leftOffset || leftOffsetElSelector) {\r\n                    currentLeftOffset = Vue.minifyComputeOffset(leftOffset, leftOffsetElSelector, 0, 'LEFT');\r\n                }\r\n                var elMiniHeight = elMini.getBoundingClientRect().height;\r\n                var elMaxiHeight = elMaxi.getBoundingClientRect().height;\r\n                //We check if nav should be fixed\r\n                // Add the fixed class to the header when you reach its scroll position. Remove \"fixed\" when you leave the scroll position\r\n                if (currentYScroll > elMaxiHeight-elMiniHeight) {\r\n                    elMini.classList.add(\"visible\");\r\n                    elMini.style.top=currentTopOffset+\"px\";//top\r\n                    elMini.style.left=currentLeftOffset+\"px\";//left  \t\t\t\r\n                } else {\r\n                    elMini.classList.remove(\"visible\");\r\n                    elMini.style.top = (-elMiniHeight-currentTopOffset)+\"px\";\r\n                }        \t\t\r\n            };\r\n            \r\n            Vue.minifyComputeOffset = function(offset, offsetElSelector, defaultOffset, direction) {\r\n                var currentOffset = defaultOffset;\r\n                if(offset) {\r\n                    currentOffset = offset;\r\n                } else if(offsetElSelector) {\r\n                    var offsetElement = document.querySelector(offsetElSelector);\r\n                    var offsetRect = offsetElement.getBoundingClientRect();\r\n                    if(direction === 'LEFT') {\r\n                        currentOffset = offsetRect.width+offsetRect.x;\r\n                    } else if(direction === 'TOP') {\r\n                        currentOffset = offsetRect.height+offsetRect.y;\r\n                    }\r\n                }\r\n                return currentOffset;\r\n            }\r\n            window.addEventListener('scroll', Vue.minifyHandler)\r\n            window.addEventListener('resize', Quasar.throttle(Vue.minifyHandler,50))\r\n        },\r\n        updated : function() {\r\n            const interval = 50;\r\n            const maxDelay = 1000;\r\n            //for(var delay = interval ; delay < maxDelay ; delay += delay) {\r\n                setTimeout(Vue.minifyHandler,50);\r\n            //}\r\n        },\r\n        unmounted: function(elMaxi) {\r\n            window.removeEventListener('scroll');\r\n            window.removeEventListener('resize');\r\n            \r\n            for(var i=0 ; i<elMaxi.childNodes.length; i++) {\r\n                var elChild = elMaxi.childNodes[i];\r\n                if(elChild.classList) {\r\n                    elChild.classList.remove(\"not-mini\")\r\n                }\r\n            }\r\n        },\r\n    }","import * as Vue from \"vue\"\r\nimport * as Quasar from \"quasar\"\r\n\r\nexport default {\r\n    \r\n    created: function(elNav, args) {\r\n        Vue.createDebugLine = function (name, position, top, color) {\r\n            let scannerLine1 = document.createElement(\"div\");\r\n            scannerLine1.style.position = position;\r\n            scannerLine1.style.top = top + 'px';\r\n            scannerLine1.style.border = 'none';\r\n            scannerLine1.style.borderTop = color + ' solid 1px';\r\n            scannerLine1.style.width = '100%';\r\n            scannerLine1.style.zIndex = '10000';\r\n            scannerLine1.style.padding = '0px';\r\n            scannerLine1.style.lineHeight = '0px';\r\n            scannerLine1.style.fontSize = '12px';\r\n            scannerLine1.style.color = color;\r\n            scannerLine1.innerHTML = name\r\n            document.querySelector('body').appendChild(scannerLine1);\r\n            return scannerLine1;\r\n        };\r\n        \r\n        const debugMode = args.value.debug ? args.value.debug : false;\r\n\r\n        const startingOffset = args.value.startingOffset ? args.value.startingOffset : 24;\r\n        const fixedPos = args.value.fixedPos ? args.value.fixedPos : 24;\r\n        const fixeTrigger = startingOffset - fixedPos;\r\n        const scanner = args.value.scanner ? args.value.scanner : fixedPos + 30; //scanner is 30px bottom of fixedPos, must be smaller than the smallest first element\r\n        const elAs = elNav.querySelectorAll('a')\r\n        elAs[0].classList.add(\"active\") //first active\r\n        elAs[0].ariaCurrent = \"step\";\r\n        const scrollContainer = Quasar.scroll.getScrollTarget(document.querySelector(elAs[0].hash))\r\n\r\n        let scannerLines = []\r\n        let startLinearLine\r\n        let lastScrollLine\r\n        if (debugMode) {\r\n            //scannerLine1 = Vue.createDebugLine('nearesBlock','absolute',scanner,'red' );\r\n            // scannerLine1b = Vue.createDebugLine('scannerStart', 'fixed', scanner, 'orange');\r\n            // startingTopLine = Vue.createDebugLine('startingTop', 'fixed', startingOffset, 'green');//position where the element is at start\r\n            // scannerLine3 = Vue.createDebugLine('fixedPos', 'fixed', fixedPos, 'blue'); //position where the nav is fixed   \r\n            startLinearLine = Vue.createDebugLine('startLinear', 'absolute', 0, 'red');\r\n            lastScrollLine = Vue.createDebugLine('last', 'absolute', 0, 'red');\r\n        }\r\n\r\n\r\n        Vue.scrollSpyHandler = function () {\r\n            if (debugMode) {\r\n                var el = elNav;\r\n                var _x = 0;\r\n                var _y = 0;\r\n                while (el && !isNaN(el.offsetLeft) && !isNaN(el.offsetTop)) {\r\n                    _x += el.offsetLeft - el.scrollLeft;\r\n                    _y += el.offsetTop - el.scrollTop;\r\n                    el = el.offsetParent;\r\n                }\r\n                console.log(\"x: \" + _x);\r\n                console.log(\"y: \" + _y + \" (startingOffset)\");\r\n                //return { top: _y, left: _x };\r\n            }\r\n            // Add the fixed class to the header when you reach its scroll position. Remove \"fixed\" when you leave the scroll position\r\n            if (window.pageYOffset > fixeTrigger) {\r\n                if (!elNav.style.top) {\r\n                    elNav.style.top = fixedPos + \"px\";\r\n                    elNav.classList.add(\"fixed\");\r\n                }\r\n                //when fixed, we must set a valid width\r\n                elNav.style.width = elNav.parentElement.getBoundingClientRect().width + \"px\";\r\n            } else {\r\n                if (elNav.style.top) {\r\n                    elNav.classList.remove(\"fixed\");\r\n                    elNav.style.top = null;\r\n                    elNav.style.width = null;\r\n                }\r\n            }\r\n\r\n            //We compute breakpoints\r\n            var scrollPosition = Quasar.scroll.getVerticalScrollPosition(scrollContainer)\r\n            var scrollBreakpoints = Vue.computeBreakPoints(scrollPosition);\r\n            //We looks between which breakpoints we are\r\n            for (var i = 0; i < elAs.length; i++) {\r\n                if (scrollBreakpoints[i] <= scrollPosition && (i >= elAs.length - 1 || scrollPosition < scrollBreakpoints[i + 1])) {\r\n                    elAs[i].classList.add(\"active\")\r\n                    elAs[i].ariaCurrent = \"step\";\r\n                } else {\r\n                    elAs[i].classList.remove(\"active\");\r\n                    elAs[i].removeAttribute(\"aria-current\");\r\n                }\r\n            }\r\n        };\r\n\r\n        Vue.computeBlockTop = function (scrollPosition) {\r\n            var blockTop = []\r\n            for (let i = 0; i < elAs.length; i++) {\r\n                const elScrollId = elAs[i].hash;\r\n                const elScroll = document.querySelector(elScrollId)\r\n                if (elScroll) {\r\n                    blockTop.push(scrollPosition + elScroll.getBoundingClientRect().top);\r\n                } else {\r\n                    //console.warn('ScrollSpy element '+elScrollId+' not found')\r\n                }\r\n            }\r\n            return blockTop;\r\n        }\r\n\r\n        Vue.scrollTo = function (event) {\r\n            event.preventDefault();\r\n            const elScrollId = event.target.hash;\r\n            const elScroll = document.querySelector(elScrollId)\r\n            var toScroll = Quasar.scroll.getVerticalScrollPosition(scrollContainer) + elScroll.getBoundingClientRect().top - scanner\r\n\r\n\r\n            var scrollPosition = Quasar.scroll.getVerticalScrollPosition(scrollContainer)\r\n            var blockTop = Vue.computeBlockTop(scrollPosition);\r\n            var scrollBreakpoints = Vue.computeBreakPoints(scrollPosition);\r\n            for (var i = 0; i < elAs.length; i++) {\r\n                if (elAs[i].hash == elScrollId) {\r\n                    //console.log('scrollTo', blockTop[i]-scanner, scrollBreakpoints[i+1])\r\n                    if (blockTop[i] - scanner < scrollBreakpoints[i + 1] || !scrollBreakpoints[i + 1]) {\r\n                        toScroll = blockTop[i] - scanner;\r\n                    } else {\r\n                        toScroll = scrollBreakpoints[i + 1] - 1;\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n            var duration = 200\r\n            Quasar.scroll.setVerticalScrollPosition(scrollContainer, toScroll, duration)\r\n        };\r\n\r\n\r\n\r\n        Vue.computeBreakPoints = function (scrollPosition) {\r\n            var blockTop = Vue.computeBlockTop(scrollPosition);\r\n\r\n            const windowHeight = (window.innerHeight || document.documentElement.clientHeight); /** visible height */\r\n            const scrollHeight = Quasar.scroll.getScrollHeight(scrollContainer) /** height of scrollable element */\r\n            const scrollMax = scrollHeight - windowHeight /** Maximum possible scroll */\r\n            const scrollEnd = scrollMax; //blockTop[blockTop.length-1]; /** Finish linear move at this scroll position */\r\n            let scrollStart = scrollEnd - windowHeight + scanner; /** Start linear move at this scroll position : start a block start */\r\n            for (let i = 1; i < elAs.length; i++) {\r\n                if (blockTop[i] - scanner > scrollStart) {\r\n                    scrollStart = blockTop[i] - scanner;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            const scrollDelta = scrollEnd - scrollStart //scroll linear regression \"to\" length\r\n            //console.log('SP',scrollPosition, ' WH', windowHeight, ' SH',scrollHeight, ' SM', scrollMax, ' SS', scrollStart,  ' SD', scrollDelta, \" scanner\",scanner    );\r\n            var scrollBreakpoints = []\r\n            scrollBreakpoints.push(0)\r\n\r\n            for (let i = 1; i < elAs.length; i++) {\r\n                if (blockTop[i] - scanner > scrollStart) {\r\n                    scrollBreakpoints[i] = scrollStart + scrollDelta * (blockTop[i] - scrollStart) / (scrollHeight - scrollStart);\r\n                    //console.log(i+' scrollBreakpoints top: ',blockTop[i])\r\n                } else {\r\n                    scrollBreakpoints[i] = blockTop[i] - scanner;\r\n                }\r\n                scrollBreakpoints[i] = Math.round(scrollBreakpoints[i])\r\n\r\n            }\r\n            if (debugMode) {\r\n                for (let i = 1; i < elAs.length; i++) {\r\n                    var scannerLine;\r\n                    if (scannerLines.length < i) {\r\n                        scannerLine = Vue.createDebugLine('navId#' + i, 'absolute', 0, 'red');\r\n                        scannerLines.push(scannerLine);\r\n                    } else {\r\n                        scannerLine = scannerLines[i - 1];\r\n                    }\r\n                    scannerLine.style.top = (scrollBreakpoints[i] + scanner) + 'px';\r\n                }\r\n                startLinearLine.style.top = (scrollStart + scanner) + 'px';\r\n                lastScrollLine.style.top = (scrollEnd + scanner) + 'px';\r\n            }\r\n            return scrollBreakpoints;\r\n        };\r\n\r\n        \r\n\r\n        elNav.classList.add(\"scroll-spy-nav\");\r\n        for (var i = 0; i < elAs.length; i++) {\r\n            elAs[i].addEventListener('click', Vue.scrollTo);\r\n        }\r\n        window.addEventListener('scroll', Vue.scrollSpyHandler)\r\n        window.addEventListener('resize', Quasar.throttle(Vue.scrollSpyHandler,50))\r\n    },\r\n    unmounted: function(elNav) {\r\n        elNav.classList.remove(\"scroll-spy-nav\");\r\n        window.removeEventListener('scroll')\r\n        window.removeEventListener('resize')\r\n        const elAs = elNav.querySelectorAll('a')\r\n        for (var i = 0; i < elAs.length; i++) {\r\n            elAs.removeEventListener('click')\r\n        }\r\n    },\r\n}","export function sortDate (a, b) {\n  return (new Date(a)) - (new Date(b))\n}\n\nexport function sortBoolean (a, b) {\n  return a && !b\n    ? -1\n    : (!a && b ? 1 : 0)\n}\n","\nexport function isDeepEqual (a, b) {\n  if (a === b) {\n    return true\n  }\n\n  if (a !== null && b !== null && typeof a === 'object' && typeof b === 'object') {\n    if (a.constructor !== b.constructor) {\n      return false\n    }\n\n    let length, i\n\n    if (a.constructor === Array) {\n      length = a.length\n\n      if (length !== b.length) {\n        return false\n      }\n\n      for (i = length; i-- !== 0;) {\n        if (isDeepEqual(a[ i ], b[ i ]) !== true) {\n          return false\n        }\n      }\n\n      return true\n    }\n\n    if (a.constructor === Map) {\n      if (a.size !== b.size) {\n        return false\n      }\n\n      let iter = a.entries()\n\n      i = iter.next()\n      while (i.done !== true) {\n        if (b.has(i.value[ 0 ]) !== true) {\n          return false\n        }\n        i = iter.next()\n      }\n\n      iter = a.entries()\n      i = iter.next()\n      while (i.done !== true) {\n        if (isDeepEqual(i.value[ 1 ], b.get(i.value[ 0 ])) !== true) {\n          return false\n        }\n        i = iter.next()\n      }\n\n      return true\n    }\n\n    if (a.constructor === Set) {\n      if (a.size !== b.size) {\n        return false\n      }\n\n      const iter = a.entries()\n\n      i = iter.next()\n      while (i.done !== true) {\n        if (b.has(i.value[ 0 ]) !== true) {\n          return false\n        }\n        i = iter.next()\n      }\n\n      return true\n    }\n\n    if (a.buffer != null && a.buffer.constructor === ArrayBuffer) {\n      length = a.length\n\n      if (length !== b.length) {\n        return false\n      }\n\n      for (i = length; i-- !== 0;) {\n        if (a[ i ] !== b[ i ]) {\n          return false\n        }\n      }\n\n      return true\n    }\n\n    if (a.constructor === RegExp) {\n      return a.source === b.source && a.flags === b.flags\n    }\n\n    if (a.valueOf !== Object.prototype.valueOf) {\n      return a.valueOf() === b.valueOf()\n    }\n\n    if (a.toString !== Object.prototype.toString) {\n      return a.toString() === b.toString()\n    }\n\n    const keys = Object.keys(a).filter(key => a[ key ] !== void 0)\n    length = keys.length\n\n    if (length !== Object.keys(b).filter(key => b[ key ] !== void 0).length) {\n      return false\n    }\n\n    for (i = length; i-- !== 0;) {\n      const key = keys[ i ]\n      if (isDeepEqual(a[ key ], b[ key ]) !== true) {\n        return false\n      }\n    }\n\n    return true\n  }\n\n  // true if both NaN, false otherwise\n  return a !== a && b !== b // eslint-disable-line no-self-compare\n}\n\n// not perfect, but what we ARE interested is for Arrays not to slip in\n// as spread operator will mess things up in various areas\nexport function isObject (v) {\n  return v !== null && typeof v === 'object' && Array.isArray(v) !== true\n}\n\nexport function isDate (v) {\n  return Object.prototype.toString.call(v) === '[object Date]'\n}\n\nexport function isRegexp (v) {\n  return Object.prototype.toString.call(v) === '[object RegExp]'\n}\n\nexport function isNumber (v) {\n  return typeof v === 'number' && isFinite(v)\n}\n\nexport default {\n  deepEqual: isDeepEqual,\n  object: isObject,\n  date: isDate,\n  regexp: isRegexp,\n  number: isNumber\n}\n","import * as Quasar from \"quasar\"\r\nimport { sortDate } from \"quasar/src/utils/private/sort.js\"\r\nimport { isNumber, isDate } from \"quasar/src/utils/is.js\"\r\n\r\nexport default {\r\n    onAjaxError: function (response) {\r\n        //Quasar Notif Schema\r\n        let notif = {\r\n            type: 'negative',\r\n            message: 'Network Error.',\r\n            multiLine: true,\r\n            icon: 'warning',\r\n            timeout: 2500,\r\n        }\r\n\r\n        //Setup Error Message\r\n        if(response) {\r\n            if (Object.prototype.hasOwnProperty.call(response.data, 'redirect')) { //if response was a redirect\r\n                 window.location = response.data.redirect;\r\n                 return;\r\n            } else if (Object.prototype.hasOwnProperty.call(response.data, 'message')) { //if response was an error\r\n                notif.message = response.data.message\r\n            }\r\n            //Setup Generic Response Messages\r\n            if (response.status === 401) {\r\n                notif.message = this.$q.lang.vui.ajaxErrors.code401\t            \r\n                this.$root.$emit('unauthorized', response) //Emit Logout Event\r\n                return;\r\n            } else if (response.status === 403) {\r\n                notif.message = this.$q.lang.vui.ajaxErrors.code403\r\n            } else if (response.status === 404) {\r\n                notif.message = this.$q.lang.vui.ajaxErrors.code404\r\n            } else if (response.status === 405) {\r\n                notif.message = this.$q.lang.vui.ajaxErrors.code405\r\n            } else if (response.status === 422) {\r\n                //Validation Message\r\n                notif.message = '';\r\n                Object.keys(response.data).forEach(function (key) {\r\n                    this.$data.uiMessageStack[key] = response.data[key];\r\n                }.bind(this));\r\n            } else if (response.status >= 500) {\r\n                notif.message = this.$q.lang.vui.ajaxErrors.code500\r\n            }\r\n            if (response.statusText && response.status !== 422) {\r\n                notif.message = response.statusText\r\n            }\r\n            //Try to Use the Response Message\r\n            if (Object.prototype.hasOwnProperty.call(response, 'data')) {\r\n                if (Object.prototype.hasOwnProperty.call(response.data, 'message') && response.data.message && response.data.message.length > 0) {\r\n                    notif.message = response.data.message\r\n                } else if (Object.prototype.hasOwnProperty.call(response.data, 'globalErrors') && response.data.globalErrors && response.data.globalErrors.length > 0) {\r\n                    var notifyMessages = this.uiMessageStackToNotify(response.data);\r\n                    notifyMessages.forEach(function(notifyMessage) { this.$q.notify(notifyMessage)}.bind(this));\r\n                    notif.message = ''; //déja envoyé\r\n                }\r\n            }\r\n        }\r\n        //Send the notif\r\n        if (notif.message.length > 0) {\r\n            this.$q.notify(notif);\r\n        }\r\n    },\r\n    uiMessageStackToNotify : function(uiMessageStack) {\r\n      if(uiMessageStack) {\r\n        var notifyMessages = [];\r\n        if(Object.prototype.hasOwnProperty.call(uiMessageStack, 'globalErrors') && uiMessageStack.globalErrors && uiMessageStack.globalErrors.length > 0) {\r\n           uiMessageStack.globalErrors.forEach(function(uiMessage) { notifyMessages.push( {\r\n            type: 'negative', message: uiMessage,\r\n            multiLine: true, timeout: 2500,\r\n           })});\r\n        }\r\n        if(Object.prototype.hasOwnProperty.call(uiMessageStack, 'globalWarnings') && uiMessageStack.globalWarnings && uiMessageStack.globalWarnings.length > 0) {\r\n           uiMessageStack.globalWarnings.forEach(function(uiMessage) { notifyMessages.push( {\r\n            type: 'warning', message: uiMessage,\r\n            multiLine: true, timeout: 2500,\r\n           })});\r\n        }\r\n        if(Object.prototype.hasOwnProperty.call(uiMessageStack, 'globalInfos') && uiMessageStack.globalInfos && uiMessageStack.globalInfos.length > 0) {\r\n           uiMessageStack.globalInfos.forEach(function(uiMessage) { notifyMessages.push( {\r\n            type: 'info', message: uiMessage,\r\n            multiLine: true, timeout: 2500,\r\n           })});\r\n        }\r\n        if(Object.prototype.hasOwnProperty.call(uiMessageStack, 'globalSuccess') && uiMessageStack.globalSuccess && uiMessageStack.globalSuccess.length > 0) {\r\n           uiMessageStack.globalSuccess.forEach(function(uiMessage) { notifyMessages.push( {\r\n            type: 'positive', message: uiMessage,\r\n            multiLine: true, timeout: 2500,\r\n           })});\r\n        }\r\n        //Pour le moment, rien avec : objectFieldErrors, objectFieldWarnings, objectFieldInfos\r\n        \r\n        return notifyMessages;\r\n      }\r\n    },\r\n\r\n    getSafeValue: function (objectkey, fieldKey, subFieldKey) {\r\n        if (this.$data.vueData[objectkey] && this.$data.vueData[objectkey][fieldKey]) {\r\n            return this.$data.vueData[objectkey][fieldKey][subFieldKey];\r\n        }\r\n        return null;\r\n    },\r\n\r\n    transformListForSelection: function (list, valueField, labelField, filterFunction, searchValue) {\r\n        let rawList = this.$data.vueData[list];\r\n        if (filterFunction) {\r\n            rawList = rawList.filter(filterFunction);\r\n        }\r\n        if (searchValue != null && searchValue.trim() !== '') {\r\n\t        const searchNormalized = this.unaccentLower(searchValue);\r\n\t        rawList = rawList.filter(val => this.unaccentLower(val[labelField].toString()).indexOf(searchNormalized) > -1); // label contains\r\n        }\r\n        return rawList.map(function (object) {\r\n            return { value: object[valueField], label: object[labelField].toString() } // a label is always a string\r\n        });\r\n    },\r\n    \r\n    unaccentLower: function(value) {\r\n\t    return value.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '').toLowerCase();\r\n    },\r\n\r\n    paginationAndSortHandler: function (params) {\r\n        var pagination = params.pagination;\r\n        let componentStates = this.$data.componentStates;\r\n        let vueData = this.$data.vueData;\r\n        var oldPagination = componentStates[pagination.componentId].pagination;\r\n        if (oldPagination.sortBy != pagination.sortBy || oldPagination.descending != pagination.descending) {\r\n            if (pagination.sortBy) {\r\n                // it's a sort\r\n                if (pagination.sortUrl) {\r\n                    //order call the server\r\n                    pagination.page = 1 //reset pagination\r\n                    this.$http.post(pagination.sortUrl, this.objectToFormData({ sortFieldName: pagination.sortBy, sortDesc: pagination.descending, CTX: this.$data.vueData.CTX }))\r\n                        .then(function (response) {\r\n                            vueData[pagination.listKey] = response.data.model[pagination.listKey];\r\n                            this.$data.vueData.CTX = response.data.model['CTX'];\r\n                        }.bind(this));\r\n                } else {\r\n                    //do locally\r\n                    this.$refs[pagination.componentId].sortMethod.apply(this.$refs[pagination.componentId], [vueData[pagination.listKey], pagination.sortBy, pagination.descending])\r\n                }\r\n            } // if we reset the sort we do nothing\r\n        }\r\n        // otherwise it's pagination or filter : do it locally\r\n        // nothing to do everything is done by the paginatedData function\r\n        componentStates[pagination.componentId].pagination = pagination;\r\n    },\r\n    paginatedData: function (list, componentId) {\r\n        let componentStates = this.$data.componentStates;\r\n        var pagination = componentStates[componentId].pagination;\r\n        if (pagination.rowsPerPage != 0) { // not all\r\n            var firstRowIndex = (pagination.page - 1) * pagination.rowsPerPage;\r\n            var lastRowIndex = pagination.page * pagination.rowsPerPage;\r\n            return this.$data.vueData[list].slice(firstRowIndex, lastRowIndex);\r\n        }\r\n        return this.$data.vueData[list];\r\n    },\r\n    createDefaultTableSort: function(componentId) {\r\n        if (this.$data.componentStates[componentId]) {\r\n            return function (data, sortBy, descending) {\r\n                let sortedColumn = this.$data.componentStates[componentId].columns.find(column => column.name === sortBy);\r\n                if (sortedColumn.datetimeFormat) {\r\n                        const\r\n                        dir = descending === true ? -1 : 1,\r\n                        val =  v => v[sortBy]\r\n\r\n                    return data.sort((a, b) => {\r\n                        let A = val(a),\r\n                            B = val(b);\r\n                        return ((Quasar.date.extractDate(A, sortedColumn.datetimeFormat).getTime() > Quasar.date.extractDate(B, sortedColumn.datetimeFormat).getTime()) ? 1 : -1) * dir;\r\n                    })\r\n                } else {\r\n                    return this.sortCiAi(data, sortBy, descending)\r\n                }\r\n            }.bind(this)\r\n        }\r\n        return this.sortCiAi\r\n    },\r\n    sortCiAi: function (data, sortBy, descending) {\r\n\r\n        const\r\n            dir = descending === true ? -1 : 1,\r\n            val =  v => v[sortBy]\r\n\r\n        const collator = new Intl.Collator();\r\n\r\n        return data.sort((a, b) => {\r\n            let A = val(a),\r\n                B = val(b)\r\n\r\n            if (A === null || A === void 0) {\r\n                return -1 * dir;\r\n            }\r\n            if (B === null || B === void 0) {\r\n                return 1 * dir;\r\n            }\r\n            if (isNumber(A) === true && isNumber(B) === true) {\r\n                return (A - B) * dir;\r\n            }\r\n            if (isDate(A) === true && isDate(B) === true) {\r\n                return sortDate(A, B) * dir;\r\n            }\r\n            if (typeof A === 'boolean' && typeof B === 'boolean') {\r\n                return (A - B) * dir;\r\n            }\r\n\r\n            [A, B] = [A, B].map(s => (s + '').toLocaleString());\r\n\r\n            return collator.compare(A, B) * dir;\r\n        })\r\n    },\r\n\r\n    selectedFunction: function (object, field, item /*, keyboard*/) {\r\n        this.$data.vueData[object][field] = item.value;\r\n    },\r\n\r\n    searchAutocomplete: function (list, valueField, labelField, componentId, url, minQueryLength, terms, update, abort) {\r\n        if (terms.length < minQueryLength) {\r\n            abort();\r\n            return\r\n        }\r\n        this.$http.post(url, this.objectToFormData({ terms: terms, list: list, valueField: valueField, labelField: labelField, CTX: this.$data.vueData.CTX }))\r\n            .then(function (response) {\r\n                var finalList = response.data.map(function (object) {\r\n                    return { value: object[valueField], label: object[labelField].toString() } // a label is always a string\r\n                });\r\n                update(function () {\r\n                    this.$data.componentStates[componentId].options = finalList;\r\n                }.bind(this));\r\n            }.bind(this))\r\n            .catch(function (error) {\r\n                this.$q.notify(error.response.status + \":\" + error.response.statusText);\r\n                update([]);\r\n            });\r\n\r\n    },\r\n    loadAutocompleteById: function (list, valueField, labelField, componentId, url, objectName, fieldName, rowIndex) {\r\n        //Method use when value(id) is set by another way : like Ajax Viewcontext update, other component, ...\r\n        //if options already contains the value (id) : we won't reload.\r\n        var value\r\n        if (rowIndex != null) {\r\n            value = this.$data.vueData[objectName][rowIndex][fieldName];\r\n        } else {\r\n            value = this.$data.vueData[objectName][fieldName];\r\n        }\r\n         \r\n        if (Array.isArray(value)) {\r\n            value.forEach(element => this.loadMissingAutocompleteOption(list, valueField, labelField, componentId, url, element));\r\n        } else {\r\n            this.loadMissingAutocompleteOption(list, valueField, labelField, componentId, url, value);\r\n        }\r\n        \r\n    },\r\n\tloadMissingAutocompleteOption: function (list, valueField, labelField, componentId, url, value){\r\n        if (!value || (this.$data.componentStates[componentId].options\r\n            .filter(function (option) { return option.value === value }.bind(this)).length > 0)) {\r\n            return\r\n        }\r\n        this.$data.componentStates[componentId].loading = true;\r\n        this.$http.post(url, this.objectToFormData({ value: value, list: list, valueField: valueField, labelField: labelField, CTX: this.$data.vueData.CTX }))\r\n            .then(function (response) {\r\n                var finalList = response.data.map(function (object) {\r\n                    return { value: object[valueField], label: object[labelField].toString() } // a label is always a string\r\n                });\r\n                this.$data.componentStates[componentId].options = this.$data.componentStates[componentId].options.concat(finalList);\r\n            }.bind(this))\r\n            .catch(function (error) {\r\n                this.$q.notify(error.response.status + \":\" + error.response.statusText);\r\n            }.bind(this))\r\n            .then(function () {// always executed\r\n                this.$data.componentStates[componentId].loading = false;\r\n            }.bind(this));\r\n\t},\r\n    decodeDate: function (value, format) {\r\n        if (value === Quasar.date.formatDate(Quasar.date.extractDate(value, 'DD/MM/YYYY'), 'DD/MM/YYYY')) {\r\n            return Quasar.date.formatDate(Quasar.date.extractDate(value, 'DD/MM/YYYY'), format);\r\n        } else {\r\n            return value;\r\n        }\r\n    },\r\n\r\n    encodeDate: function (newValue, format) {\r\n        if (newValue === Quasar.date.formatDate(Quasar.date.extractDate(newValue, format), format)) {\r\n            return Quasar.date.formatDate(Quasar.date.extractDate(newValue, format), 'DD/MM/YYYY');\r\n        } else {\r\n            return newValue;\r\n        }\r\n    },\r\n\r\n    decodeDatetime: function (value, format) {\r\n        if (value === Quasar.date.formatDate(Quasar.date.extractDate(value, 'DD/MM/YYYY HH:mm'), 'DD/MM/YYYY HH:mm')) {\r\n            return Quasar.date.formatDate(Quasar.date.extractDate(value, 'DD/MM/YYYY HH:mm'), format);\r\n        } else {\r\n            return value;\r\n        }\r\n    },\r\n\r\n    encodeDatetime: function (newValue, format) {\r\n        if (newValue === Quasar.date.formatDate(Quasar.date.extractDate(newValue, format), format)) {\r\n            return Quasar.date.formatDate(Quasar.date.extractDate(newValue, format), 'DD/MM/YYYY HH:mm');\r\n        } else {\r\n            return newValue;\r\n        }\r\n    },\r\n\r\n    sortDatesAsString: function (format) {\r\n        return function (date1, date2, rowA, rowB) {\r\n            return (Quasar.date.extractDate(date1, format).getTime() > Quasar.date.extractDate(date2, format).getTime()) ? 1 : -1;\r\n        }\r\n    },\r\n\r\n    goTo: function (url) {\r\n        window.location = url;\r\n    },\r\n\r\n    openModal: function (modalId, url, params) {\r\n        if (url) {\r\n            var finalUrl = url;\r\n            if (params && Object.keys(params).length > 0) {\r\n                var paramsString = Object.keys(params).map(function (key) {\r\n                    return key + '=' + params[key];\r\n                }).join(\"&\");\r\n                finalUrl = finalUrl + '?' + paramsString;\r\n            }\r\n            this.$data.componentStates[modalId].srcUrl = finalUrl;\r\n        }\r\n        this.$data.componentStates[modalId].opened = true;\r\n    },\r\n\r\n    toogleFacet: function (facetCode, facetValueCode, contextKey) {\r\n        let vueData = this.$data.vueData;\r\n        var multiple = false;\r\n        vueData[contextKey + \"_facets\"].forEach(function (facet) {\r\n            if (facet.code === facetCode) {\r\n                // get the right facet \r\n                multiple = facet.multiple;\r\n            }\r\n        })\r\n        var selectedFacetValues = vueData[contextKey + \"_selectedFacets\"][facetCode]\r\n        if (selectedFacetValues) {\r\n            if (selectedFacetValues.includes(facetValueCode)) {\r\n                if (multiple) {\r\n                    selectedFacetValues.splice(selectedFacetValues.indexOf(facetValueCode), 1);\r\n                } else {\r\n                    selectedFacetValues.splice(0);\r\n                }\r\n            } else {\r\n                selectedFacetValues.push(facetValueCode);\r\n            }\r\n        } else {\r\n            vueData[contextKey + \"_selectedFacets\"][facetCode] = [facetValueCode];\r\n        }\r\n        this.search(contextKey);\r\n    },\r\n\r\n    search: Quasar.debounce(function (contextKey) {\r\n        let componentStates = this.$data.componentStates;\r\n        let vueData = this.$data.vueData;\r\n        var selectedFacetsContextKey = contextKey + \"_selectedFacets\";\r\n        var criteriaContextKey = vueData[contextKey + '_criteriaContextKey'];\r\n        var params = this.vueDataParams([criteriaContextKey]);\r\n        params.append(selectedFacetsContextKey, JSON.stringify(vueData[selectedFacetsContextKey]));\r\n\r\n        var searchUrl = componentStates[contextKey + 'Search'].searchUrl;\r\n        var collectionComponentId = componentStates[contextKey + 'Search'].collectionComponentId;\r\n\r\n        if (componentStates[collectionComponentId].pagination && componentStates[collectionComponentId].pagination.sortBy) {\r\n            var collectionPagination = componentStates[collectionComponentId].pagination;\r\n            params.append('sortFieldName', collectionPagination.sortBy);\r\n            params.append('sortDesc', collectionPagination.descending);\r\n        }\r\n        this.httpPostAjax(searchUrl, params, {\r\n            onSuccess: function (response) {\r\n                if (componentStates[collectionComponentId].pagination) {\r\n                    var collectionPagination = componentStates[collectionComponentId].pagination;\r\n                    collectionPagination.page = 1 // reset page\r\n                    collectionPagination.rowsNumber = response.data.model[contextKey + '_list'].length\r\n                }\r\n            }\r\n        });\r\n    }, 400),\r\n\r\n    showMore: function (componentId) {\r\n        let componentStates = this.$data.componentStates;\r\n        var showMoreCount = componentStates[componentId].pagination.showMoreCount;\r\n        if (showMoreCount) {\r\n            // nothing to do\r\n        } else {\r\n            showMoreCount = 1;\r\n            componentStates[componentId].pagination.showMoreCount = showMoreCount;\r\n        }\r\n        componentStates[componentId].pagination.rowsPerPage = componentStates[componentId].pagination.rowsPerPage / showMoreCount * (showMoreCount + 1);\r\n    },\r\n    vueDataToArray(value) {\r\n        if (Array.isArray(value)) {\r\n            return value;\r\n        } else if (value) {\r\n            return [value];\r\n        }\r\n        return [];\r\n    },\r\n    vueDataToObject(value) {\r\n        if(Array.isArray(value)) {\r\n            if (value.length == 0 ) {\r\n                return null\r\n            } else if (value.length == 1) {\r\n                return value[0]\r\n            }\r\n            return value;\r\n        } else if(value) {\r\n            return value;\r\n        }\r\n        return null;\r\n    },\r\n    obtainVueDataAccessor(referer, object, field, rowIndex) {\r\n        if (field != null && field != 'null') {\r\n            if (rowIndex != null) {\r\n                return {\r\n                    get: function () {\r\n                        return referer.$data.vueData[object][rowIndex][field];\r\n                    },\r\n                    set: function (newData) {\r\n                        referer.$data.vueData[object][rowIndex][field] = newData;\r\n                    }\r\n                }\r\n            } else {\r\n                return {\r\n                    get: function () {\r\n                        return referer.$data.vueData[object][field];\r\n                    },\r\n                    set: function (newData) {\r\n                        referer.$data.vueData[object][field] = newData;\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            return {\r\n                get: function () {\r\n                    return referer.$data.vueData[object];\r\n                },\r\n                set: function (newData) {\r\n                    referer.$data.vueData[object] = newData;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    uploader_dragenter(componentId) {\r\n        let componentStates = this.$data.componentStates;\r\n        componentStates[componentId].dragover = true;\r\n    },\r\n    uploader_dragleave(componentId) {\r\n        let componentStates = this.$data.componentStates;\r\n        componentStates[componentId].dragover = false;\r\n    },\r\n    uploader_drop(event, componentId) {\r\n        var component = this.$refs[componentId];\r\n        component.addFiles(event.dataTransfer.files);\r\n    },\r\n    httpPostAjax: function (url, paramsIn, options) {\r\n        var paramsInResolved = !paramsIn ? [] :  Array.isArray(paramsIn) ? this.vueDataParams(paramsIn) : paramsIn;\r\n        let vueData = this.$data.vueData;\r\n        let uiMessageStack = this.$data.uiMessageStack;\r\n        let params = this.isFormData(paramsInResolved) ? paramsInResolved : this.objectToFormData(paramsInResolved);\r\n        params.append('CTX', vueData.CTX);\r\n        this.pushPendingAction(url);\r\n        this.$http.post(url, params).then(function (response) {\r\n          if (response.data.model.CTX) {\r\n            vueData.CTX = response.data.model.CTX;\r\n          }\r\n          Object.keys(response.data.model).forEach(function (key) {\r\n            if ('CTX' != key) {\r\n              vueData[key] = response.data.model[key];\r\n            }\r\n          });\r\n          Object.keys(response.data.uiMessageStack).forEach(function (key) {\r\n            uiMessageStack[key] = response.data.uiMessageStack[key];\r\n          });\r\n          if (options && options.onSuccess) {\r\n            options.onSuccess.call(this, response, window);\r\n          }\r\n        }.bind(this)).catch(function (error) {\r\n          if (options && options.onError) {\r\n            options.onError.call(this, error.response, window);\r\n          }              \r\n        }).finally(function () {\r\n          this.removePendingAction(url);\r\n        }.bind(this));\r\n    },\r\n    isPendingAction: function(actionName) {\r\n        if(actionName) {\r\n            return this.$data.componentStates.pendingAction.actionNames.includes(actionName);\r\n        } else {\r\n            return this.$data.componentStates.pendingAction.actionNames.length > 0;\r\n        }\r\n    },\r\n    pushPendingAction: function(actionName) {\r\n         this.$data.componentStates.pendingAction.actionNames.push(actionName);\r\n    },\r\n    removePendingAction: function(actionName) {\r\n        this.$data.componentStates.pendingAction.actionNames = this.$data.componentStates.pendingAction.actionNames.filter(e => e !== actionName);\r\n    },\r\n    removePendingActionAfterDelay: function(actionName, delay) {\r\n        setTimeout(function () {this.removePendingAction(actionName)}.bind(this), delay);\r\n    },        \r\n\r\n    hasFieldsError: function (object, field, rowIndex) {\r\n        const fieldsErrors = this.$data.uiMessageStack.objectFieldErrors;\r\n        const fieldName = field.split(\"_\")[0]; // trim any qualifier like \"_fmt\"\r\n        if (fieldsErrors) {\r\n            var objectName = rowIndex != null ? object + '[' + rowIndex + ']' : object;\r\n            return Object.prototype.hasOwnProperty.call(fieldsErrors, objectName) &&\r\n                fieldsErrors[objectName] && Object.prototype.hasOwnProperty.call(fieldsErrors[objectName], fieldName) && fieldsErrors[objectName][fieldName].length > 0\r\n        }\r\n        return false;\r\n    },\r\n\r\n    getErrorMessage: function (object, field, rowIndex) {\r\n        const fieldsErrors = this.$data.uiMessageStack.objectFieldErrors;\r\n        const fieldName = field.split(\"_\")[0]; // trim any qualifier like \"_fmt\"\r\n        if (fieldsErrors) {\r\n            var objectName = rowIndex != null ? object + '[' + rowIndex + ']' : object;\r\n            if (Object.prototype.hasOwnProperty.call(fieldsErrors, objectName) &&\r\n                fieldsErrors[objectName] && Object.prototype.hasOwnProperty.call(fieldsErrors[objectName], fieldName)) {\r\n                return fieldsErrors[objectName][fieldName].join(', ');\r\n            }\r\n        } else {\r\n            return '';\r\n        }\r\n    },\r\n\r\n    vueDataParams: function (keys) {\r\n        var params = new FormData();\r\n        for (var i = 0; i < keys.length; i++) {\r\n            var attribs = keys[i].split('.',2);\r\n            var contextKey = attribs[0];\r\n            var attribute = attribs[1];\r\n            var vueDataValue = this.$data.vueData[contextKey];\r\n            if (vueDataValue && typeof vueDataValue === 'object' && Array.isArray(vueDataValue) === false) {\r\n                // object\r\n                if(!attribute) {\r\n                    Object.keys(vueDataValue).forEach(function (propertyKey) {\r\n                        if (!propertyKey.includes(\"_\") ) {\r\n                            //  properties taht start with _ are private and don't belong to the serialized entity\r\n                            // we filter field with modifiers (like <field>_display and <field>_fmt)\r\n                            this._vueDataParamsKey(params, contextKey, propertyKey, vueDataValue)\r\n                        }\r\n                    }.bind(this));\r\n                } else {\r\n                    this._vueDataParamsKey(params, contextKey, attribute, vueDataValue)\r\n                }\r\n            } else if (vueDataValue && Array.isArray(vueDataValue) === true) {\r\n                // array\r\n                vueDataValue.forEach(function (value, index) {\r\n                    if(!attribute) {\r\n                        Object.keys(value).forEach(function (propertyKey) {\r\n                            if (!propertyKey.includes(\"_\") ) {\r\n                                //  properties that start with _ are private and don't belong to the serialized entity\r\n                                // we filter field with modifiers (like <field>_display and <field>_fmt)\r\n                                this._vueDataParamsKey(params, contextKey +']['+ index , propertyKey, value)\r\n                            }\r\n                        }.bind(this));\r\n                    } else {\r\n                        this._vueDataParamsKey(params, contextKey +']['+ index, attribute, value)\r\n                    }\r\n                }.bind(this));\r\n            } else {\r\n                //primitive\r\n                this.appendToFormData(params, 'vContext[' + contextKey + ']', vueDataValue);\r\n            }\r\n        }\r\n        return params;\r\n\r\n    },\r\n    _vueDataParamsKey: function(params, contextKey, propertyKey, vueDataValue) {\r\n        let vueDataFieldValue = vueDataValue[propertyKey];\r\n        if (Array.isArray(vueDataFieldValue)) {\r\n            if (!vueDataFieldValue || vueDataFieldValue.length == 0) {\r\n                this.appendToFormData(params, 'vContext[' + contextKey + '][' + propertyKey + ']', \"\"); // reset array with an empty string\r\n            } else {\r\n                vueDataFieldValue.forEach(function (value, index) {\r\n                    if (vueDataFieldValue[index] && typeof vueDataFieldValue[index] === 'object') {\r\n                        this.appendToFormData(params, 'vContext[' + contextKey + '][' + propertyKey + ']', vueDataFieldValue[index]['_v_inputValue']);\r\n                    } else {\r\n                        this.appendToFormData(params, 'vContext[' + contextKey + '][' + propertyKey + ']', vueDataFieldValue[index]);\r\n                    }\r\n                }.bind(this));\r\n            }\r\n        } else {\r\n            if (vueDataFieldValue && typeof vueDataFieldValue === 'object') {\r\n                this.appendToFormData(params, 'vContext[' + contextKey + '][' + propertyKey + ']', vueDataFieldValue['_v_inputValue']);\r\n            } else {\r\n                this.appendToFormData(params, 'vContext[' + contextKey + '][' + propertyKey + ']', vueDataFieldValue);\r\n            }\r\n        }\r\n    },\r\n    objectToFormData: function (object) {\r\n        const formData = new FormData();\r\n        Object.keys(object).forEach(function (key) {\r\n            this.appendToFormData(formData, key, object[key])\r\n        }.bind(this));\r\n        return formData;\r\n    },\r\n\r\n    appendToFormData: function (formData, name, value) {\r\n        if (value != null) {\r\n            formData.append(name, value)\r\n        } else {\r\n            formData.append(name, \"\")\r\n        }\r\n    },\r\n\r\n    isFormData: function (val) {\r\n        return (typeof FormData !== 'undefined') && (val instanceof FormData);\r\n    },\r\n    /**\r\n     * Capture the <CTL-V> paste event, only allow plain-text, no images.         *\r\n     * see: https://stackoverflow.com/a/28213320         *\r\n     * @param {object} evt - array of files\r\n     * @author Daniel Thompson-Yvetot\r\n     * @license MIT\r\n     */\r\n    pastePlainTextCapture (evt, editorRef) {\r\n      // Let inputs do their thing, so we don't break pasting of links.\r\n      if (evt.target.nodeName === 'INPUT') return\r\n      let text, onPasteStripFormattingIEPaste\r\n      evt.preventDefault()\r\n      if (evt.originalEvent && evt.originalEvent.clipboardData.getData) {\r\n        text = evt.originalEvent.clipboardData.getData('text/plain')\r\n        this.$refs[editorRef].runCmd('insertText', text)\r\n      }\r\n      else if (evt.clipboardData && evt.clipboardData.getData) {\r\n        text = evt.clipboardData.getData('text/plain')\r\n        this.$refs[editorRef].runCmd('insertText', text)\r\n      }\r\n      else if (window.clipboardData && window.clipboardData.getData) {\r\n        if (!onPasteStripFormattingIEPaste) {\r\n          onPasteStripFormattingIEPaste = true\r\n          this.$refs[editorRef].runCmd('ms-pasteTextOnly', text)\r\n        }\r\n        onPasteStripFormattingIEPaste = false\r\n      }\r\n    },\r\n    editorHandlerFixHelper(tags, regexp, doBlockName, undoBlockName, eVm, caret) {\r\n        if(caret.hasParents(tags, true)) { \r\n            eVm.runCmd('formatBlock', undoBlockName);\r\n            \r\n            if(!caret.range.commonAncestorContainer.hasChildNodes()) {\r\n                 var currentNode = caret.selection.focusNode.parentNode;\r\n                while(currentNode && currentNode !== caret.el) {\r\n                    if(tags.includes(currentNode.nodeName.toLowerCase())) {\r\n                        currentNode.outerHTML = currentNode.outerHTML.replace(regexp,\"\");\r\n                    }\r\n                    currentNode = currentNode.parentNode;\r\n                }                    \r\n            } else {\r\n               var inSelection = false;\r\n                var startNode = caret.range.startContainer;\r\n                while(startNode && startNode !== caret.el && startNode.parentNode !== caret.range.commonAncestorContainer) {\r\n                    startNode = startNode.parentNode;\r\n                }                \r\n                var endNode = caret.range.endContainer;\r\n                while(endNode && endNode !== caret.el && endNode.parentNode !== caret.range.commonAncestorContainer) {\r\n                    endNode = endNode.parentNode;\r\n                }\r\n                caret.range.commonAncestorContainer.childNodes.forEach(\r\n                    function (currentNode) {\r\n                        if(currentNode === startNode) {\r\n                            inSelection = true;\r\n                        }\r\n                        if(inSelection) {\r\n                            currentNode.outerHTML = currentNode.outerHTML.replace(regexp,\"\");\r\n                        }\r\n                        if(currentNode === endNode) {\r\n                            inSelection = false;                            \r\n                        }\r\n                    }\r\n                )\r\n            }\r\n        } else {\r\n            eVm.runCmd('formatBlock', doBlockName);\r\n        }\r\n    },\r\n    editorHandlerBlockquoteFix(e,eVm,caret) {\r\n        this.editorHandlerFixHelper(['blockquote'], /<\\/?blockquote[^>]*\\/?>/g, 'blockquote', 'div', eVm, caret);\r\n    },\r\n    editorHandlerParagrapheFix(e,eVm,caret) {\r\n        this.editorHandlerFixHelper(['h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'h7', 'h8', 'h9'], /<\\/?h[1-9][^>]*\\/?>/g, 'div', 'div', eVm, caret);            \r\n    }\r\n}\r\n","export default {\r\n        ajaxErrors: {\r\n            code401: 'UnAuthorized, you may login with an authorized account',\r\n            code403: 'Forbidden, your havn&quote;t enought rights',\r\n            code404: 'API Route is Missing or Undefined',\r\n            code405: 'API Route Method Not Allowed',\r\n            code500: 'Server Error'\r\n        },\r\n        comments: {\r\n            title : \"Comments\",\r\n            inputLabel : \"Insert here a comment\",\r\n            actionlabel : \"Publish\",\r\n            cancel :\"Cancel\",\r\n            save : \"Save\"\r\n        },\r\n        chatbot: {\r\n            errorMessage: \"An error occured sending the message\",\r\n            tryAgain: \"Try again\",\r\n            suggestedAnswers : \"Suggested answers\",\r\n            inputPlaceHolder : \"Enter here a message\",\r\n            restartMessage : \"Conversation is restarting\"\r\n        },\r\n        facets : {\r\n            showAll : \"Show all\",\r\n            showLess : \"Show less\"\r\n        },\r\n        notifications : {\r\n            days : \"days\",\r\n            hours : \"hours\",\r\n            minutes : \"min\",\r\n            seconds : \"s\"\r\n        },\r\n        commands : {\r\n            globalPlaceholder : \"Type / to show all available commands\",\r\n            executeCommand : \"Press Enter to execute command\",\r\n            linkLabel : \"Show details\"\r\n        },\r\n\t\t\"uploader\" : {\r\n\t\t\t\"clear_all\" : \"Clear All\",\r\n\t\t\t\"removeUploaded\" : \"Remove Uploaded Files\",\r\n\t\t\t\"remove\" : \"Remove\",\r\n\t\t\t\"add\" : \"Pick Files\",\r\n\t\t\t\"upload\" : \"Upload Files\",\r\n\t\t\t\"clear\" : \"Abort Upload\"\r\n\t\t},\r\n        handles : {\r\n            placeholder : \"Enter a handle : format is type/code\"\r\n        }\r\n    };","export default {\r\n        ajaxErrors: {\r\n            code401: 'Non autoris&eacute;, essayez de vous reconnecter',\r\n            code403: 'Vous n&quote;avez pas les droits suffisants pour effectuer cette action',\r\n            code404: 'API introuvable',\r\n            code405: 'API non autoris&eacute;e',\r\n            code500: 'Erreur serveur'\r\n        },\r\n        comments: {\r\n            title : \"Commentaires\",\r\n            inputLabel : \"Insérer un commentaire ici\",\r\n            actionlabel : \"Publier\",\r\n            cancel :\"Annuler\",\r\n            save : \"Sauver\"\r\n        },\r\n        chatbot: {\r\n            errorMessage: \"Une erreur est survenue lors de l'envoi du message\",\r\n            tryAgain: \"Essayez de nouveau\",\r\n            suggestedAnswers : \"Réponses suggérées\",\r\n            inputPlaceHolder : \"Ecrire un message\",\r\n            restartMessage : \"Redémarrage de la conversation\"\r\n        },\r\n        facets : {\r\n            showAll : \"Voir plus\",\r\n            showLess : \"Voir moins\"\r\n        },\r\n        notifications : {\r\n            days : \"jours\",\r\n            hours : \"heures\",\r\n            minutes : \"min\",\r\n            seconds : \"s\"\r\n        },\r\n        commands : {\r\n            globalPlaceholder : \"Taper / pour afficher les commandes disponibles\",\r\n            executeCommand : \"Appuyer sur entrée pour executer la commande\",\r\n            linkLabel : \"Voir les détails\"\r\n        },\r\n\t\t\"uploader\" : {\r\n\t\t\t\"clear_all\" : \"Annuler tous\",\r\n\t\t\t\"removeUploaded\" : \"Supprimer tous\",\r\n\t\t\t\"remove\" : \"Supprimer\",\r\n\t\t\t\"add\" : \"Ajouter un fichier\",\r\n\t\t\t\"upload\" : \"Envoyer\",\r\n\t\t\t\"clear\" : \"Annuler\"\r\n\t\t},\r\n        handles : {\r\n            placeholder : \"Entrer un handle de la forme type/code\"\r\n        }\r\n    };","import * as Quasar from \"quasar\"\r\n\r\nimport VChatbot from './components/VChatbot.vue'\r\nimport VCommands from './components/VCommands.vue'\r\nimport VComments from './components/VComments.vue'\r\nimport VExtensionsStore from './components/VExtensionsStore.vue'\r\nimport VFacets from './components/VFacets.vue'\r\nimport VGeopointInput from './components/VGeopointInput.vue'\r\nimport VHandles from './components/VHandles.vue'\r\nimport VJsonEditor from './components/VJsonEditor.vue'\r\nimport VNotifications from './components/VNotifications.vue'\r\nimport VMap from './components/VMap.vue'\r\nimport VMapLayer from './components/VMapLayer.vue'\r\nimport VTree from './components/VTree.vue'\r\nimport VFileUpload from './components/VFileUpload.vue'\r\n\r\nimport VDashboardChart from './components/dashboard/VDashboardChart.vue'\r\n\r\nimport VAlertUnsavedUpdates from './directives/VAlertUnsavedUpdates'\r\nimport VAutofocus from './directives/VAutofocus'\r\nimport VIfUnsavedUpdates from './directives/VIfUnsavedUpdates'\r\nimport VMinify from './directives/VMinify'\r\nimport VScrollSpy from './directives/VScrollSpy'\r\n\r\nimport VMethods from './methods'\r\n\r\nimport EnUs from './lang/vertigo-ui-lang-en-us'\r\nimport Fr from './lang/vertigo-ui-lang-fr'\r\n\r\nvar VertigoUi = {\r\n\r\n  getBoundMethods : function(obj, methods) {\r\n    let boundMethods = {};\r\n    Object.keys(methods)\r\n        .forEach(methodName => boundMethods[methodName] = methods[methodName].bind(obj));\r\n    return boundMethods;\r\n  },\r\n\r\n   install : function (vueApp , options) {\r\n      \r\n    // components\r\n    vueApp.component(\"v-chatbot\", VChatbot);\r\n    vueApp.component(\"v-commands\", VCommands);\r\n    vueApp.component(\"v-comments\", VComments);\r\n    vueApp.component(\"v-extensions-store\", VExtensionsStore);\r\n    vueApp.component(\"v-facets\", VFacets);\r\n    vueApp.component(\"v-geopoint-input\", VGeopointInput);\r\n    vueApp.component(\"v-handles\", VHandles);\r\n    vueApp.component(\"v-json-editor\", VJsonEditor);\r\n    vueApp.component(\"v-notifications\", VNotifications);\r\n    vueApp.component(\"v-map\", VMap);\r\n    vueApp.component(\"v-map-layer\", VMapLayer);\r\n    vueApp.component(\"v-tree\", VTree)\r\n    vueApp.component(\"v-file-upload\", VFileUpload);\r\n    vueApp.component(\"v-dashboard-chart\", VDashboardChart);\r\n\r\n    // directives\r\n    vueApp.directive(\"alert-unsaved-updates\", VAlertUnsavedUpdates);\r\n    vueApp.directive(\"autofocus\", VAutofocus);\r\n    vueApp.directive(\"if-unsaved-updates\", VIfUnsavedUpdates);\r\n    vueApp.directive(\"minify\", VMinify);\r\n    vueApp.directive(\"scroll-spy\", VScrollSpy);\r\n    \r\n    if (!options.axios) {\r\n        console.error('You have to install axios')\r\n        return\r\n    }\r\n\r\n    vueApp.axios = options.axios;\r\n    vueApp.$http = options.axios;\r\n\r\n    Object.defineProperties(vueApp.config.globalProperties, {\r\n        axios: {\r\n            get() {\r\n            return options.axios\r\n            }\r\n        },\r\n    \r\n        $http: {\r\n            get() {\r\n            return options.axios\r\n            }\r\n        },\r\n\r\n        $vui: {\r\n            get() {\r\n                return VertigoUi.getBoundMethods(this, VMethods);\r\n            }\r\n        }\r\n    });\r\n   \r\n   \r\n },\r\n\r\n methods: VMethods,\r\n\r\n initData : function(instance, json) {\r\n    instance.vueData = json.vueData;\r\n\tinstance.componentStates = json.componentStates;\r\n    instance.uiMessageStack = json.uiMessageStack;\r\n    instance.vuiLang = json.vuiLang;\r\n },\r\n\r\n lang : {\r\n     enUS: EnUs,\r\n     fr: Fr\r\n }\r\n}\r\n\r\nif (window) {\r\n    window.VertigoUi = VertigoUi\r\n}\r\n\r\n\r\n\r\nexport default VertigoUi;"],"names":["_sfc_main","btn","sanitizedString","response","value","httpResponse","currentMessage","watingTime","lastMsg","cmd","milliseconds","resolve","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_openBlock","_createElementBlock","_createVNode","_component_q_scroll_area","_createElementVNode","_Fragment","_renderList","_ctx","msg","index","_createBlock","_component_q_chat_message","_component_q_rating","$event","_toDisplayString","_component_q_btn","_cache","$options","_component_q_spinner_dots","_component_q_input","_withKeys","$props","val","update","abort","command","selection","commitCommand","keyEvent","paramValue","actualParams","param","newOptions","element","newParams","actualValue","isFirst","args","_createTextVNode","_component_q_select","event","_component_q_separator","Quasar","newComment","creationDate","diff","_component_q_badge","_component_q_drawer","_component_q_list","_component_q_item_label","_component_big","_component_q_item","_component_q_item_section","comment","_component_q_avatar","_component_q_icon","_component_q_popup_edit","availableExtensions","availableExtension","color","extension","_component_q_card","_normalizeStyle","_component_q_toggle","facetCode","facetValueCodeTranslator","facet","facetValueCode","facetValue","facetValueByCode","obj","facetValues","selectedFacetValues","selectedFacet","selectedFacetValue","_component_q_chip","_component_q_checkbox","newVal","newInputValue","handle","key","_component_q_field","newList","sortedList","b","newElements","lastOldElement","newIdx","notif","type","typeIcon","_component_q_menu","ol","found","vm","checkForMap","view","osmSource","osmLayer","mapControls","buildCustomControls","e","mapExtent","wgs84Extent","topLeft","bottomRight","evt","opt_options","options","_renderSlot","newItemsCoordString","newClusterCoordString","i","geoField","arrayOfFeatures","object","geoObject","iconFeature","arrayOfClusterFeatures","maxZoom","maxZoomResolved","extentPadded","valueCoord","el","geohash","bounds","latMin","lonMin","latMax","lonMax","lat","lon","evenBit","chr","idx","n","bitN","lonMid","latMid","olMap","clusterSource","clusterLayer","styleIcon","styleCache","feature","size","agregateFeatures","fSize","style","popup","coordinates","pixel","hit","draw","coord","button","target","rse","list","subTreeKey","map","node","roots","_component_q_tree","format","humanStorageSize","props","xhrParams","fileInfoUri","uiFileInfos","uiFileInfo","error","uploadInfo","newFileInforUris","file","a","c","removedFile","indexOfFile","quasarFiles","files","quasarUploader","quasarFileSize","totalSize","remoteFilesSize","_component_q_uploader","_mergeProps","_createSlots","_withCtx","slotProps","_normalizeClass","_component_q_circular_progress","_component_q_spinner","_component_q_uploader_add_trigger","_component_q_tooltip","define","constructor","factory","prototype","extend","parent","definition","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","channels","color_formatHex","color_formatHex8","color_formatHsl","color_formatRgb","hslConvert","m","l","rgbn","Rgb","rgba","hsla","r","g","rgbConvert","o","rgb","opacity","k","clampi","clampa","rgb_formatHex","rgb_formatHex8","rgb_formatRgb","hex","h","s","Hsl","min","max","hsl","m2","m1","hsl2rgb","clamph","clampt","constant","x","linear","d","t","exponential","y","hue","gamma","nogamma","interpolateRgb","rgbGamma","start","end","colorRgb","colorHsl","interpolateHsl","d3","getColors","colorName","nbSeries","mainColors","interpolation","_interpolateHsl","_interpolateCatmul","_interpolateLinear","resultColors","isCycle","d3Color","nbColors","_point2PointColors","c1","c2","c3","c4","empty","nc1","nc2","nc3","nc4","red","_catmull","green","blue","colorInterpolation","startJ","interpolatedColor","nbInterpolatedColor","nbInterpolatedColorDegree","j","result","inP0","p1","p2","inP3","delta","p0","p3","translatedData","newValue","oldValue","dataQuery","datas","dataMetrics","timedSeries","queryGroupBy","dataLabels","dataColors","chartTitle","additionalOptions","xLabels","chartOptions","chartJsDataSets","chartJsType","realLabels","metric","bubblesData","pieData","ctx","finalOptions","graphChart","chartData","datasets","myColors","myBgColors","maxRadius","xAxisType","yAxisType","context","data","base","graphs","graph","point","optionKey","axisType","minMax","dataMeasures","groupBy","newSeries","serie","radiusField","field","dataValues","xAxisMeasure","_endsWith","string","suffix","lastTime","stepSize","dataTime","labels","label","dateTimeDim","item","sources","source","VAlertUnsavedUpdates","binding","vnode","watchKeys","uiMessageStack","hasError","watchKey","VAutofocus","doFocus","nextTick","VIfUnsavedUpdates","Vue","VMinify","elMaxi","topOffset","topOffsetElSelector","leftOffset","leftOffsetElSelector","elMini","elChild","scrollContainer","currentYScroll","currentXScroll","currentTopOffset","currentLeftOffset","elMiniHeight","elMaxiHeight","offset","offsetElSelector","defaultOffset","direction","currentOffset","offsetElement","offsetRect","VScrollSpy","elNav","name","position","top","scannerLine1","debugMode","startingOffset","fixedPos","fixeTrigger","scanner","elAs","scannerLines","startLinearLine","lastScrollLine","_x","_y","scrollPosition","scrollBreakpoints","blockTop","elScrollId","elScroll","toScroll","duration","windowHeight","scrollHeight","scrollEnd","scrollStart","scrollDelta","scannerLine","sortDate","isDate","v","isNumber","VMethods","notifyMessages","notifyMessage","uiMessage","objectkey","fieldKey","subFieldKey","valueField","labelField","filterFunction","searchValue","rawList","searchNormalized","params","pagination","componentStates","vueData","oldPagination","componentId","firstRowIndex","lastRowIndex","sortBy","descending","sortedColumn","column","dir","A","B","collator","url","minQueryLength","terms","finalList","objectName","fieldName","rowIndex","option","date1","date2","rowA","rowB","modalId","finalUrl","paramsString","contextKey","multiple","selectedFacetsContextKey","criteriaContextKey","searchUrl","collectionComponentId","collectionPagination","showMoreCount","referer","newData","component","paramsIn","paramsInResolved","actionName","delay","fieldsErrors","keys","attribs","attribute","vueDataValue","propertyKey","vueDataFieldValue","formData","editorRef","text","onPasteStripFormattingIEPaste","tags","regexp","doBlockName","undoBlockName","eVm","caret","inSelection","startNode","endNode","currentNode","EnUs","Fr","VertigoUi","methods","boundMethods","methodName","vueApp","VChatbot","VCommands","VComments","VExtensionsStore","VFacets","VGeopointInput","VHandles","VJsonEditor","VNotifications","VMap","VMapLayer","VTree","VFileUpload","VDashboardChart","instance","json"],"mappings":"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","x_google_ignoreList":[13,14,15,16,17,18,26,27]}